{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { PureComponent } from 'react';\nimport { DeleteOutlined, PlusOutlined, PlayCircleOutlined } from '@ant-design/icons';\nimport { Progress, Button, Upload, Tooltip, Image, Modal } from 'antd';\nimport { VideoPlayer } from '@components/common';\nimport '../post/index.less';\n\nvar UploadList = /*#__PURE__*/function (_PureComponent) {\n  _inherits(UploadList, _PureComponent);\n\n  var _super = _createSuper(UploadList);\n\n  function UploadList() {\n    var _this;\n\n    _classCallCheck(this, UploadList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isShowPreview: false,\n      previewUrl: ''\n    });\n\n    return _this;\n  }\n\n  _createClass(UploadList, [{\n    key: \"beforeUpload\",\n    value: function beforeUpload(file, fileList) {\n      var handleAddMore = this.props.onAddMore;\n      handleAddMore(file, fileList);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          files = _this$props.files,\n          handleRemove = _this$props.remove,\n          uploading = _this$props.uploading,\n          type = _this$props.type;\n      var _this$state = this.state,\n          isShowPreview = _this$state.isShowPreview,\n          previewUrl = _this$state.previewUrl;\n      return __jsx(\"div\", {\n        className: \"f-upload-list\"\n      }, files && files.map(function (file) {\n        return __jsx(\"div\", {\n          className: \"f-upload-item\",\n          key: file._id || file.uid\n        }, __jsx(\"div\", {\n          className: \"f-upload-thumb\"\n        }, file.type.includes('feed-photo') || file.type.includes('image') ? __jsx(Image, {\n          placeholder: true,\n          alt: \"img\",\n          src: file.url ? file.url : file.thumbnail,\n          width: \"100%\"\n        }) : file.type.includes('video') ? __jsx(\"span\", {\n          className: \"f-thumb-vid\",\n          \"aria-hidden\": true,\n          onClick: function onClick() {\n            return _this2.setState({\n              isShowPreview: true,\n              previewUrl: file === null || file === void 0 ? void 0 : file.url\n            });\n          }\n        }, __jsx(PlayCircleOutlined, null)) : __jsx(\"img\", {\n          alt: \"img\",\n          src: \"/static/no-image.jpg\",\n          width: \"100%\"\n        })), __jsx(\"div\", {\n          className: \"f-upload-name\"\n        }, __jsx(Tooltip, {\n          title: file.name\n        }, file.name)), __jsx(\"div\", {\n          className: \"f-upload-size\"\n        }, (file.size / (1024 * 1024)).toFixed(2), ' ', \"MB\"), file.status !== 'uploading' && __jsx(\"span\", {\n          className: \"f-remove\"\n        }, __jsx(Button, {\n          type: \"primary\",\n          onClick: handleRemove.bind(_this2, file)\n        }, __jsx(DeleteOutlined, null))), file.percent && __jsx(Progress, {\n          percent: Math.round(file.percent)\n        }));\n      }), (type === 'photo' || type === 'video' && !files.length) && __jsx(\"div\", {\n        className: \"add-more\"\n      }, __jsx(Upload, {\n        customRequest: function customRequest() {\n          return true;\n        },\n        accept: type === 'video' ? 'video/*' : 'image/*',\n        beforeUpload: this.beforeUpload.bind(this),\n        multiple: type === 'photo',\n        showUploadList: false,\n        disabled: uploading,\n        listType: \"picture\"\n      }, __jsx(PlusOutlined, null), ' ', \"Add\", ' ', type === 'photo' ? 'photos' : type === 'video' ? 'video' : 'files')), __jsx(Modal, {\n        width: 767,\n        footer: null,\n        onOk: function onOk() {\n          return _this2.setState({\n            isShowPreview: false\n          });\n        },\n        onCancel: function onCancel() {\n          return _this2.setState({\n            isShowPreview: false\n          });\n        },\n        visible: isShowPreview,\n        destroyOnClose: true\n      }, __jsx(VideoPlayer, {\n        autoplay: true,\n        controls: true,\n        playsinline: true,\n        fluid: true,\n        sources: [{\n          src: previewUrl,\n          type: 'video/mp4'\n        }]\n      })));\n    }\n  }]);\n\n  return UploadList;\n}(PureComponent);\n\nexport { UploadList as default };","map":{"version":3,"sources":["c:/Users/Admin/Desktop/Work/foodiefans/foodiefans-main/user/src/components/file/list-media.tsx"],"names":["PureComponent","DeleteOutlined","PlusOutlined","PlayCircleOutlined","Progress","Button","Upload","Tooltip","Image","Modal","VideoPlayer","UploadList","isShowPreview","previewUrl","file","fileList","handleAddMore","props","onAddMore","files","handleRemove","remove","uploading","type","state","map","_id","uid","includes","url","thumbnail","setState","name","size","toFixed","status","bind","percent","Math","round","length","beforeUpload","autoplay","controls","playsinline","fluid","sources","src"],"mappings":"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","sourcesContent":["import { PureComponent } from 'react';\nimport { DeleteOutlined, PlusOutlined, PlayCircleOutlined } from '@ant-design/icons';\nimport {\n  Progress, Button, Upload, Tooltip, Image, Modal\n} from 'antd';\nimport { VideoPlayer } from '@components/common';\nimport '../post/index.less';\n\ninterface IProps {\n  remove: Function;\n  files: any[];\n  onAddMore: Function;\n  uploading: boolean;\n  type?: string;\n}\nexport default class UploadList extends PureComponent<IProps> {\n  state = {\n    isShowPreview: false,\n    previewUrl: ''\n  }\n\n  beforeUpload(file, fileList) {\n    const { onAddMore: handleAddMore } = this.props;\n    handleAddMore(file, fileList);\n  }\n\n  render() {\n    const {\n      files, remove: handleRemove, uploading, type\n    } = this.props;\n    const { isShowPreview, previewUrl } = this.state;\n    return (\n      <div className=\"f-upload-list\">\n        {files && files.map((file) => (\n          <div className=\"f-upload-item\" key={file._id || file.uid}>\n            <div className=\"f-upload-thumb\">\n              {/* eslint-disable-next-line no-nested-ternary */}\n              {(file.type.includes('feed-photo') || file.type.includes('image'))\n                ? <Image placeholder alt=\"img\" src={file.url ? file.url : file.thumbnail} width=\"100%\" />\n                : file.type.includes('video') ? (\n                  <span className=\"f-thumb-vid\" aria-hidden onClick={() => this.setState({ isShowPreview: true, previewUrl: file?.url })}>\n                    <PlayCircleOutlined />\n                  </span>\n                ) : <img alt=\"img\" src=\"/static/no-image.jpg\" width=\"100%\" />}\n            </div>\n            <div className=\"f-upload-name\">\n              <Tooltip title={file.name}>{file.name}</Tooltip>\n            </div>\n            <div className=\"f-upload-size\">\n              {(file.size / (1024 * 1024)).toFixed(2)}\n              {' '}\n              MB\n            </div>\n            {file.status !== 'uploading'\n              && (\n              <span className=\"f-remove\">\n                <Button type=\"primary\" onClick={handleRemove.bind(this, file)}>\n                  <DeleteOutlined />\n                </Button>\n              </span>\n              )}\n            {file.percent && <Progress percent={Math.round(file.percent)} />}\n          </div>\n        ))}\n        {(type === 'photo' || (type === 'video' && !files.length)) && (\n        <div className=\"add-more\">\n          <Upload\n            customRequest={() => true}\n            accept={type === 'video' ? 'video/*' : 'image/*'}\n            beforeUpload={this.beforeUpload.bind(this)}\n            multiple={type === 'photo'}\n            showUploadList={false}\n            disabled={uploading}\n            listType=\"picture\"\n          >\n            <PlusOutlined />\n            {' '}\n            Add\n            {' '}\n            {/* eslint-disable-next-line no-nested-ternary */}\n            {type === 'photo' ? 'photos' : type === 'video' ? 'video' : 'files'}\n          </Upload>\n        </div>\n        )}\n        <Modal\n          width={767}\n          footer={null}\n          onOk={() => this.setState({ isShowPreview: false })}\n          onCancel={() => this.setState({ isShowPreview: false })}\n          visible={isShowPreview}\n          destroyOnClose\n        >\n          <VideoPlayer\n            {...{\n              autoplay: true,\n              controls: true,\n              playsinline: true,\n              fluid: true,\n              sources: [\n                {\n                  src: previewUrl,\n                  type: 'video/mp4'\n                }\n              ]\n            }}\n          />\n        </Modal>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}