{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { PureComponent } from 'react';\nimport { Avatar, message, Tooltip } from 'antd';\nimport { TickIcon } from 'src/icons';\nimport { HeartFilled, HeartOutlined } from '@ant-design/icons';\nimport Link from 'next/link';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport { followService } from 'src/services';\nimport './performer.less';\n\nvar PerformerCard = /*#__PURE__*/function (_PureComponent) {\n  _inherits(PerformerCard, _PureComponent);\n\n  var _super = _createSuper(PerformerCard);\n\n  function PerformerCard() {\n    var _this;\n\n    _classCallCheck(this, PerformerCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isFollowed: false,\n      requesting: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleJoinStream\", function (e) {\n      e.preventDefault();\n      var _this$props = _this.props,\n          user = _this$props.user,\n          performer = _this$props.performer;\n\n      if (!user._id) {\n        message.error('Please log in or register!');\n        return;\n      }\n\n      if (user.isPerformer) return;\n\n      if (!(performer !== null && performer !== void 0 && performer.isSubscribed)) {\n        message.error('Please subscribe to this model!');\n        return;\n      }\n\n      Router.push({\n        pathname: '/streaming/details',\n        query: {\n          performer: JSON.stringify(performer),\n          username: (performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id)\n        }\n      }, \"/streaming/\".concat((performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id)));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFollow\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this$props2, performer, user, onFollow, _this$state, isFollowed, requesting, error;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props2 = _this.props, performer = _this$props2.performer, user = _this$props2.user, onFollow = _this$props2.onFollow;\n              _this$state = _this.state, isFollowed = _this$state.isFollowed, requesting = _this$state.requesting;\n\n              if (!(requesting || user.isPerformer)) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              if (user._id) {\n                _context.next = 7;\n                break;\n              }\n\n              message.error('Please log in or register!');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              _context.prev = 7;\n\n              _this.setState({\n                requesting: true\n              });\n\n              if (isFollowed) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.next = 12;\n              return followService.create(performer === null || performer === void 0 ? void 0 : performer._id);\n\n            case 12:\n              _this.setState({\n                isFollowed: true,\n                requesting: false\n              });\n\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.next = 17;\n              return followService[\"delete\"](performer === null || performer === void 0 ? void 0 : performer._id);\n\n            case 17:\n              _this.setState({\n                isFollowed: false,\n                requesting: false\n              });\n\n            case 18:\n              onFollow && onFollow();\n              _context.next = 28;\n              break;\n\n            case 21:\n              _context.prev = 21;\n              _context.t0 = _context[\"catch\"](7);\n              _context.next = 25;\n              return _context.t0;\n\n            case 25:\n              error = _context.sent;\n              message.error(error.message || 'Error occured, please try again later');\n\n              _this.setState({\n                requesting: false\n              });\n\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 21]]);\n    })));\n\n    return _this;\n  }\n\n  _createClass(PerformerCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var performer = this.props.performer;\n      this.setState({\n        isFollowed: !!(performer !== null && performer !== void 0 && performer.isFollowed)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          performer = _this$props3.performer,\n          countries = _this$props3.countries,\n          user = _this$props3.user;\n      var isFollowed = this.state.isFollowed;\n      var country = countries && countries.length && countries.find(function (c) {\n        return c.code === performer.country;\n      });\n      return __jsx(\"div\", {\n        className: \"model-card\",\n        style: {\n          backgroundImage: \"url(\".concat((performer === null || performer === void 0 ? void 0 : performer.cover) || '/static/banner-image.jpg', \")\")\n        }\n      }, __jsx(\"div\", {\n        className: \"hovering\"\n      }, (performer === null || performer === void 0 ? void 0 : performer.isFreeSubscription) && __jsx(\"span\", {\n        className: \"card-free\"\n      }, \"Free\"), (performer === null || performer === void 0 ? void 0 : performer.live) > 0 && __jsx(\"span\", {\n        className: \"live-status\",\n        \"aria-hidden\": true,\n        onClick: this.handleJoinStream.bind(this)\n      }, \"Live\"), __jsx(\"span\", {\n        className: \"card-age\"\n      }, moment().diff(moment(performer.dateOfBirth), 'years') > 0 && \"\".concat(moment().diff(moment(performer.dateOfBirth), 'years'), \"+\")), __jsx(\"div\", {\n        className: \"card-img\"\n      }, __jsx(Avatar, {\n        alt: \"avatar\",\n        src: (performer === null || performer === void 0 ? void 0 : performer.avatar) || '/static/no-avatar.png'\n      })), __jsx(\"span\", {\n        className: (performer === null || performer === void 0 ? void 0 : performer.isOnline) > 0 ? 'online-status active' : 'online-status'\n      }), __jsx(Link, {\n        href: {\n          pathname: '/model/profile',\n          query: {\n            username: (performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id)\n          }\n        },\n        as: \"/\".concat((performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id))\n      }, __jsx(\"a\", null, __jsx(\"div\", {\n        className: \"model-name\"\n      }, __jsx(\"div\", {\n        className: \"name\"\n      }, (performer === null || performer === void 0 ? void 0 : performer.name) || 'N/A', ' ', country && __jsx(\"img\", {\n        alt: \"performer-country\",\n        className: \"model-country\",\n        src: country === null || country === void 0 ? void 0 : country.flag\n      }), ' ', (performer === null || performer === void 0 ? void 0 : performer.verifiedAccount) && __jsx(TickIcon, null)), __jsx(\"p\", null, \"@\".concat((performer === null || performer === void 0 ? void 0 : performer.username) || 'n/a'))))), !(user !== null && user !== void 0 && user.isPerformer) && __jsx(\"a\", {\n        \"aria-hidden\": true,\n        onClick: function onClick() {\n          return _this2.handleFollow();\n        },\n        className: !isFollowed ? 'follow-btn' : 'follow-btn active'\n      }, isFollowed ? __jsx(Tooltip, {\n        title: \"Following\"\n      }, __jsx(HeartFilled, null)) : __jsx(Tooltip, {\n        title: \"Follow\"\n      }, __jsx(HeartOutlined, null)))));\n    }\n  }]);\n\n  return PerformerCard;\n}(PureComponent);\n\nvar maptStateToProps = function maptStateToProps(state) {\n  return {\n    user: _objectSpread({}, state.user.current)\n  };\n};\n\nexport default connect(maptStateToProps)(PerformerCard);","map":{"version":3,"sources":["c:/Users/Admin/Desktop/Work/foodiefans/foodiefans-main/user/src/components/performer/card.tsx"],"names":["PureComponent","Avatar","message","Tooltip","TickIcon","HeartFilled","HeartOutlined","Link","moment","connect","Router","followService","PerformerCard","isFollowed","requesting","e","preventDefault","props","user","performer","_id","error","isPerformer","isSubscribed","push","pathname","query","JSON","stringify","username","onFollow","state","setState","create","countries","country","length","find","c","code","backgroundImage","cover","isFreeSubscription","live","handleJoinStream","bind","diff","dateOfBirth","avatar","isOnline","name","flag","verifiedAccount","handleFollow","maptStateToProps","current"],"mappings":"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","sourcesContent":["import { PureComponent } from 'react';\nimport { Avatar, message, Tooltip } from 'antd';\nimport { TickIcon } from 'src/icons';\nimport { HeartFilled, HeartOutlined } from '@ant-design/icons';\nimport { IPerformer, ICountry, IUser } from 'src/interfaces';\nimport Link from 'next/link';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport { followService } from 'src/services';\nimport './performer.less';\n\ninterface IProps {\n  performer: IPerformer;\n  countries: ICountry[];\n  user: IUser;\n  onFollow?: Function;\n}\n\nclass PerformerCard extends PureComponent<IProps> {\n  state = {\n    isFollowed: false,\n    requesting: false\n  };\n\n  componentDidMount(): void {\n    const { performer } = this.props;\n    this.setState({ isFollowed: !!performer?.isFollowed });\n  }\n\n  handleJoinStream = (e) => {\n    e.preventDefault();\n    const { user, performer } = this.props;\n    if (!user._id) {\n      message.error('Please log in or register!');\n      return;\n    }\n    if (user.isPerformer) return;\n    if (!performer?.isSubscribed) {\n      message.error('Please subscribe to this model!');\n      return;\n    }\n    Router.push({\n      pathname: '/streaming/details',\n      query: {\n        performer: JSON.stringify(performer),\n        username: performer?.username || performer?._id\n      }\n    }, `/streaming/${performer?.username || performer?._id}`);\n  }\n\n  handleFollow = async () => {\n    const { performer, user, onFollow } = this.props;\n    const { isFollowed, requesting } = this.state;\n    if (requesting || user.isPerformer) return;\n    if (!user._id) {\n      message.error('Please log in or register!');\n      return;\n    }\n    try {\n      this.setState({ requesting: true });\n      if (!isFollowed) {\n        await followService.create(performer?._id);\n        this.setState({ isFollowed: true, requesting: false });\n      } else {\n        await followService.delete(performer?._id);\n        this.setState({ isFollowed: false, requesting: false });\n      }\n      onFollow && onFollow();\n    } catch (e) {\n      const error = await e;\n      message.error(error.message || 'Error occured, please try again later');\n      this.setState({ requesting: false });\n    }\n  };\n\n  render() {\n    const { performer, countries, user } = this.props;\n    const { isFollowed } = this.state;\n    const country = countries && countries.length && countries.find((c) => c.code === performer.country);\n\n    return (\n      <div\n        className=\"model-card\"\n        style={{\n          backgroundImage: `url(${performer?.cover || '/static/banner-image.jpg'})`\n        }}\n      >\n        <div className=\"hovering\">\n          {performer?.isFreeSubscription && (\n          <span className=\"card-free\">Free</span>\n          )}\n          {performer?.live > 0 && <span className=\"live-status\" aria-hidden onClick={this.handleJoinStream.bind(this)}>Live</span>}\n\n          <span className=\"card-age\">\n            {moment().diff(moment(performer.dateOfBirth), 'years') > 0 && `${moment().diff(moment(performer.dateOfBirth), 'years')}+`}\n          </span>\n          <div className=\"card-img\">\n            <Avatar alt=\"avatar\" src={performer?.avatar || '/static/no-avatar.png'} />\n          </div>\n          <span className={performer?.isOnline > 0 ? 'online-status active' : 'online-status'} />\n          <Link\n            href={{\n              pathname: '/model/profile',\n              query: { username: performer?.username || performer?._id }\n            }}\n            as={`/${performer?.username || performer?._id}`}\n          >\n            <a>\n              <div className=\"model-name\">\n                <div className=\"name\">\n                  {performer?.name || 'N/A'}\n                  {' '}\n                  {country && (\n                  <img alt=\"performer-country\" className=\"model-country\" src={country?.flag} />\n                  )}\n                  {' '}\n                  {performer?.verifiedAccount && <TickIcon />}\n                </div>\n                <p>\n                  {`@${performer?.username || 'n/a'}`}\n                </p>\n              </div>\n\n            </a>\n          </Link>\n          {!user?.isPerformer && (\n            <a aria-hidden onClick={() => this.handleFollow()} className={!isFollowed ? 'follow-btn' : 'follow-btn active'}>\n              {isFollowed ? <Tooltip title=\"Following\"><HeartFilled /></Tooltip> : <Tooltip title=\"Follow\"><HeartOutlined /></Tooltip>}\n            </a>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst maptStateToProps = (state) => ({ user: { ...state.user.current } });\nexport default connect(maptStateToProps)(PerformerCard);\n"]},"metadata":{},"sourceType":"module"}