{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/* eslint-disable no-prototype-builtins */\nimport { Component } from 'react';\nimport { Menu, Dropdown, Divider, message, Modal, Tooltip, Button, Avatar } from 'antd';\nimport { HeartOutlined, CommentOutlined, BookOutlined, UnlockOutlined, MoreOutlined, DollarOutlined, LockOutlined, FlagOutlined, FileImageOutlined, VideoCameraOutlined } from '@ant-design/icons';\nimport { TickIcon } from 'src/icons';\nimport Link from 'next/link';\nimport { CommentForm, ListComments } from '@components/comment';\nimport { getComments, moreComment, createComment, deleteComment } from '@redux/comment/actions';\nimport { formatDate, videoDuration, shortenLargeNumber } from '@lib/index';\nimport { reactionService, feedService, tokenTransctionService, paymentService, reportService } from '@services/index';\nimport { connect } from 'react-redux';\nimport { TipPerformerForm } from '@components/performer/tip-form';\nimport ReactMomentCountDown from 'react-moment-countdown';\nimport moment from 'moment';\nimport { VideoPlayer } from '@components/common/video-player';\nimport { ConfirmSubscriptionPerformerForm } from '@components/performer';\nimport { ReportForm } from '@components/report/report-form';\nimport Router from 'next/router';\nimport { updateBalance } from '@redux/user/actions';\nimport Loader from '@components/common/base/loader';\nimport { PurchaseFeedForm } from './confirm-purchase';\nimport FeedSlider from './post-slider';\nimport './index.less';\n\nvar FeedCard = /*#__PURE__*/function (_Component) {\n  _inherits(FeedCard, _Component);\n\n  var _super = _createSuper(FeedCard);\n\n  function FeedCard() {\n    var _this;\n\n    _classCallCheck(this, FeedCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isOpenComment: false,\n      isLiked: false,\n      isBookMarked: false,\n      isBought: false,\n      totalLike: 0,\n      totalComment: 0,\n      isFirstLoadComment: true,\n      itemPerPage: 10,\n      commentPage: 0,\n      isHovered: false,\n      openTipModal: false,\n      openPurchaseModal: false,\n      openTeaser: false,\n      submiting: false,\n      polls: [],\n      requesting: false,\n      openSubscriptionModal: false,\n      openReportModal: false,\n      subscriptionType: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleJoinStream\", function () {\n      var _feed$performer, _feed$performer2, _feed$performer3, _feed$performer4;\n\n      var _this$props = _this.props,\n          user = _this$props.user,\n          feed = _this$props.feed;\n\n      if (!user._id) {\n        message.error('Please log in or register!');\n        return;\n      }\n\n      if (user.isPerformer) return;\n\n      if (!(feed !== null && feed !== void 0 && feed.isSubscribed)) {\n        message.error('Please subscribe to this model!');\n        return;\n      }\n\n      Router.push({\n        pathname: '/streaming/details',\n        query: {\n          performer: JSON.stringify(feed === null || feed === void 0 ? void 0 : feed.performer),\n          username: (feed === null || feed === void 0 ? void 0 : (_feed$performer = feed.performer) === null || _feed$performer === void 0 ? void 0 : _feed$performer.username) || (feed === null || feed === void 0 ? void 0 : (_feed$performer2 = feed.performer) === null || _feed$performer2 === void 0 ? void 0 : _feed$performer2._id)\n        }\n      }, \"/streaming/\".concat((feed === null || feed === void 0 ? void 0 : (_feed$performer3 = feed.performer) === null || _feed$performer3 === void 0 ? void 0 : _feed$performer3.username) || (feed === null || feed === void 0 ? void 0 : (_feed$performer4 = feed.performer) === null || _feed$performer4 === void 0 ? void 0 : _feed$performer4._id)));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleLike\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var feed, _this$state, isLiked, totalLike, requesting, error;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              feed = _this.props.feed;\n              _this$state = _this.state, isLiked = _this$state.isLiked, totalLike = _this$state.totalLike, requesting = _this$state.requesting;\n\n              if (!requesting) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              _context.prev = 4;\n              _context.next = 7;\n              return _this.setState({\n                requesting: true\n              });\n\n            case 7:\n              if (isLiked) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 10;\n              return reactionService.create({\n                objectId: feed._id,\n                action: 'like',\n                objectType: 'feed'\n              });\n\n            case 10:\n              _this.setState({\n                isLiked: true,\n                totalLike: totalLike + 1,\n                requesting: false\n              });\n\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.next = 15;\n              return reactionService[\"delete\"]({\n                objectId: feed._id,\n                action: 'like',\n                objectType: 'feed'\n              });\n\n            case 15:\n              _this.setState({\n                isLiked: false,\n                totalLike: totalLike - 1,\n                requesting: false\n              });\n\n            case 16:\n              _context.next = 25;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](4);\n              _context.next = 22;\n              return _context.t0;\n\n            case 22:\n              error = _context.sent;\n              message.error(error.message || 'Error occured, please try again later');\n\n              _this.setState({\n                requesting: false\n              });\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 18]]);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBookmark\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _this$props2, feed, user, _this$state2, isBookMarked, requesting, error;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$props2 = _this.props, feed = _this$props2.feed, user = _this$props2.user;\n              _this$state2 = _this.state, isBookMarked = _this$state2.isBookMarked, requesting = _this$state2.requesting;\n\n              if (!(requesting || !user._id || user.isPerformer)) {\n                _context2.next = 4;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 4:\n              _context2.prev = 4;\n              _context2.next = 7;\n              return _this.setState({\n                requesting: true\n              });\n\n            case 7:\n              if (isBookMarked) {\n                _context2.next = 13;\n                break;\n              }\n\n              _context2.next = 10;\n              return reactionService.create({\n                objectId: feed._id,\n                action: 'book_mark',\n                objectType: 'feed'\n              });\n\n            case 10:\n              _this.setState({\n                isBookMarked: true,\n                requesting: false\n              });\n\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.next = 15;\n              return reactionService[\"delete\"]({\n                objectId: feed._id,\n                action: 'book_mark',\n                objectType: 'feed'\n              });\n\n            case 15:\n              _this.setState({\n                isBookMarked: false,\n                requesting: false\n              });\n\n            case 16:\n              _context2.next = 25;\n              break;\n\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](4);\n              _context2.next = 22;\n              return _context2.t0;\n\n            case 22:\n              error = _context2.sent;\n              message.error(error.message || 'Error occured, please try again later');\n\n              _this.setState({\n                requesting: false\n              });\n\n            case 25:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 18]]);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleReport\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(payload) {\n        var feed, err;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                feed = _this.props.feed;\n                _context3.prev = 1;\n                _context3.next = 4;\n                return _this.setState({\n                  requesting: true\n                });\n\n              case 4:\n                _context3.next = 6;\n                return reportService.create(_objectSpread(_objectSpread({}, payload), {}, {\n                  target: 'feed',\n                  targetId: feed._id,\n                  performerId: feed.fromSourceId\n                }));\n\n              case 6:\n                message.success('Your report has been sent');\n                _context3.next = 15;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](1);\n                _context3.next = 13;\n                return _context3.t0;\n\n              case 13:\n                err = _context3.sent;\n                message.error(err.message || 'error occured, please try again later');\n\n              case 15:\n                _context3.prev = 15;\n\n                _this.setState({\n                  requesting: false,\n                  openReportModal: false\n                });\n\n                return _context3.finish(15);\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 9, 15, 18]]);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenComment\", function () {\n      var _this$props3 = _this.props,\n          feed = _this$props3.feed,\n          handleGetComment = _this$props3.getComments;\n      var _this$state3 = _this.state,\n          isOpenComment = _this$state3.isOpenComment,\n          isFirstLoadComment = _this$state3.isFirstLoadComment,\n          itemPerPage = _this$state3.itemPerPage,\n          commentPage = _this$state3.commentPage;\n\n      _this.setState({\n        isOpenComment: !isOpenComment\n      });\n\n      if (isFirstLoadComment) {\n        _this.setState({\n          isFirstLoadComment: false\n        });\n\n        handleGetComment({\n          objectId: feed._id,\n          limit: itemPerPage,\n          offset: commentPage\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"copyLink\", function () {\n      var feed = _this.props.feed;\n      var str = \"\".concat(window.location.origin, \"/post/\").concat((feed === null || feed === void 0 ? void 0 : feed.slug) || (feed === null || feed === void 0 ? void 0 : feed._id));\n      var el = document.createElement('textarea');\n      el.value = str;\n      el.setAttribute('readonly', '');\n      el.style.position = 'absolute';\n      el.style.left = '-9999px';\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand('copy');\n      document.body.removeChild(el);\n      message.success('Copied to clipboard');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"moreComment\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var _this$props4, feed, handleLoadMore, _this$state4, commentPage, itemPerPage;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _this$props4 = _this.props, feed = _this$props4.feed, handleLoadMore = _this$props4.moreComment;\n              _this$state4 = _this.state, commentPage = _this$state4.commentPage, itemPerPage = _this$state4.itemPerPage;\n\n              _this.setState({\n                commentPage: commentPage + 1\n              });\n\n              handleLoadMore({\n                limit: itemPerPage,\n                offset: (commentPage + 1) * itemPerPage,\n                objectId: feed._id\n              });\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteComment\", function (item) {\n      var handleDelete = _this.props.deleteComment;\n      if (!window.confirm('Are you sure to remove this comment?')) return;\n      handleDelete(item._id);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"subscribe\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var _this$props5, feed, user, settings, subscriptionType, resp, _resp$data, err;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _this$props5 = _this.props, feed = _this$props5.feed, user = _this$props5.user, settings = _this$props5.settings;\n              subscriptionType = _this.state.subscriptionType;\n\n              if (user._id) {\n                _context5.next = 6;\n                break;\n              }\n\n              message.error('Please log in!');\n              Router.push('/');\n              return _context5.abrupt(\"return\");\n\n            case 6:\n              if (!user.isPerformer) {\n                _context5.next = 8;\n                break;\n              }\n\n              return _context5.abrupt(\"return\");\n\n            case 8:\n              if (!(settings.paymentGateway === 'stripe' && !user.stripeCardIds.length)) {\n                _context5.next = 12;\n                break;\n              }\n\n              message.error('Please add payment card');\n              Router.push('/user/cards');\n              return _context5.abrupt(\"return\");\n\n            case 12:\n              _context5.prev = 12;\n\n              _this.setState({\n                submiting: true\n              });\n\n              _context5.next = 16;\n              return paymentService.subscribePerformer({\n                type: subscriptionType || 'monthly',\n                performerId: feed.fromSourceId,\n                paymentGateway: settings.paymentGateway\n              });\n\n            case 16:\n              resp = _context5.sent;\n\n              if (settings.paymentGateway === 'ccbill') {\n                window.location.href = resp === null || resp === void 0 ? void 0 : (_resp$data = resp.data) === null || _resp$data === void 0 ? void 0 : _resp$data.paymentUrl;\n              } else {\n                _this.setState({\n                  openSubscriptionModal: false\n                });\n              }\n\n              _context5.next = 27;\n              break;\n\n            case 20:\n              _context5.prev = 20;\n              _context5.t0 = _context5[\"catch\"](12);\n              _context5.next = 24;\n              return _context5.t0;\n\n            case 24:\n              err = _context5.sent;\n              message.error(err.message || 'error occured, please try again later');\n\n              _this.setState({\n                openSubscriptionModal: false,\n                submiting: false\n              });\n\n            case 27:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[12, 20]]);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"sendTip\", /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(price) {\n        var _feed$performer5;\n\n        var _this$props6, feed, user, handleUpdateBalance, _feed$performer6, _feed$performer7, err;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this$props6 = _this.props, feed = _this$props6.feed, user = _this$props6.user, handleUpdateBalance = _this$props6.updateBalance;\n\n                if (!(user._id === (feed === null || feed === void 0 ? void 0 : (_feed$performer5 = feed.performer) === null || _feed$performer5 === void 0 ? void 0 : _feed$performer5._id))) {\n                  _context6.next = 4;\n                  break;\n                }\n\n                message.error('Models cannot tip for themselves');\n                return _context6.abrupt(\"return\");\n\n              case 4:\n                if (!(user.balance < price)) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                message.error('Your wallet balance is not enough');\n                Router.push('/wallet');\n                return _context6.abrupt(\"return\");\n\n              case 8:\n                _context6.prev = 8;\n                _context6.next = 11;\n                return _this.setState({\n                  requesting: true\n                });\n\n              case 11:\n                _context6.next = 13;\n                return tokenTransctionService.sendTip(feed === null || feed === void 0 ? void 0 : (_feed$performer6 = feed.performer) === null || _feed$performer6 === void 0 ? void 0 : _feed$performer6._id, {\n                  performerId: feed === null || feed === void 0 ? void 0 : (_feed$performer7 = feed.performer) === null || _feed$performer7 === void 0 ? void 0 : _feed$performer7._id,\n                  price: price\n                });\n\n              case 13:\n                message.success('Thank you for the tip');\n                handleUpdateBalance({\n                  token: -price\n                });\n                _context6.next = 23;\n                break;\n\n              case 17:\n                _context6.prev = 17;\n                _context6.t0 = _context6[\"catch\"](8);\n                _context6.next = 21;\n                return _context6.t0;\n\n              case 21:\n                err = _context6.sent;\n                message.error(err.message || 'error occured, please try again later');\n\n              case 23:\n                _context6.prev = 23;\n\n                _this.setState({\n                  requesting: false,\n                  openTipModal: false\n                });\n\n                return _context6.finish(23);\n\n              case 26:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[8, 17, 23, 26]]);\n      }));\n\n      return function (_x2) {\n        return _ref6.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"purchaseFeed\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      var _this$props7, feed, user, handleUpdateBalance, error;\n\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _this$props7 = _this.props, feed = _this$props7.feed, user = _this$props7.user, handleUpdateBalance = _this$props7.updateBalance;\n\n              if (!(user.balance < feed.price)) {\n                _context7.next = 5;\n                break;\n              }\n\n              message.error('Your wallet balance is not enough');\n              Router.push('/wallet');\n              return _context7.abrupt(\"return\");\n\n            case 5:\n              _context7.prev = 5;\n              _context7.next = 8;\n              return _this.setState({\n                requesting: true\n              });\n\n            case 8:\n              _context7.next = 10;\n              return tokenTransctionService.purchaseFeed(feed._id, {});\n\n            case 10:\n              message.success('Unlocked successfully!');\n\n              _this.setState({\n                isBought: true\n              });\n\n              handleUpdateBalance({\n                token: -feed.price\n              });\n              _context7.next = 21;\n              break;\n\n            case 15:\n              _context7.prev = 15;\n              _context7.t0 = _context7[\"catch\"](5);\n              _context7.next = 19;\n              return _context7.t0;\n\n            case 19:\n              error = _context7.sent;\n              message.error(error.message || 'Error occured, please try again later');\n\n            case 21:\n              _context7.prev = 21;\n\n              _this.setState({\n                requesting: false,\n                openPurchaseModal: false\n              });\n\n              return _context7.finish(21);\n\n            case 24:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[5, 15, 21, 24]]);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"votePoll\", /*#__PURE__*/function () {\n      var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(poll) {\n        var feed, polls, isExpired, index, error;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                feed = _this.props.feed;\n                polls = _this.state.polls;\n                isExpired = new Date(feed.pollExpiredAt) < new Date();\n\n                if (!isExpired) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                message.error('The poll is now closed');\n                return _context8.abrupt(\"return\");\n\n              case 6:\n                if (window.confirm('Vote it?')) {\n                  _context8.next = 8;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 8:\n                _context8.prev = 8;\n                _context8.next = 11;\n                return _this.setState({\n                  requesting: true\n                });\n\n              case 11:\n                _context8.next = 13;\n                return feedService.votePoll(poll._id);\n\n              case 13:\n                index = polls.findIndex(function (p) {\n                  return p._id === poll._id;\n                });\n                _context8.next = 16;\n                return _this.setState(function (prevState) {\n                  var newItems = _toConsumableArray(prevState.polls);\n\n                  newItems[index].totalVote += 1;\n                  return {\n                    polls: newItems,\n                    requesting: false\n                  };\n                });\n\n              case 16:\n                _context8.next = 25;\n                break;\n\n              case 18:\n                _context8.prev = 18;\n                _context8.t0 = _context8[\"catch\"](8);\n                _context8.next = 22;\n                return _context8.t0;\n\n              case 22:\n                error = _context8.sent;\n                message.error(error.message || 'Something went wrong, please try again later');\n\n                _this.setState({\n                  requesting: false\n                });\n\n              case 25:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[8, 18]]);\n      }));\n\n      return function (_x3) {\n        return _ref8.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  _createClass(FeedCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var feed = this.props.feed;\n\n      if (feed) {\n        this.setState({\n          isLiked: feed.isLiked,\n          isBookMarked: feed.isBookMarked,\n          isBought: feed.isBought,\n          totalLike: feed.totalLike,\n          totalComment: feed.totalComment,\n          polls: feed.polls ? feed.polls : []\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props8 = this.props,\n          feed = _this$props8.feed,\n          commentMapping = _this$props8.commentMapping,\n          comment = _this$props8.comment;\n      var totalComment = this.state.totalComment;\n\n      if (!prevProps.comment.data && comment.data && comment.data.objectId === feed._id || prevProps.commentMapping[feed._id] && totalComment !== commentMapping[feed._id].total) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          totalComment: commentMapping[feed._id].total\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _feed$thumbnail,\n          _feed$thumbnail2,\n          _images$,\n          _images$2,\n          _feed$teaser,\n          _feed$teaser2,\n          _videos$,\n          _videos$2,\n          _this2 = this,\n          _feed$performer8,\n          _feed$performer9,\n          _feed$performer10,\n          _feed$performer11,\n          _feed$performer12,\n          _feed$performer13,\n          _feed$teaser3,\n          _feed$teaser4;\n\n      var _this$props9 = this.props,\n          feed = _this$props9.feed,\n          user = _this$props9.user,\n          commentMapping = _this$props9.commentMapping,\n          comment = _this$props9.comment,\n          handleDelete = _this$props9.onDelete,\n          handleCreateComment = _this$props9.createComment,\n          siteName = _this$props9.siteName;\n      var performer = feed.performer;\n      var commenting = comment.requesting;\n      var fetchingComment = commentMapping.hasOwnProperty(feed._id) ? commentMapping[feed._id].requesting : false;\n      var comments = commentMapping.hasOwnProperty(feed._id) ? commentMapping[feed._id].items : [];\n      var totalComments = commentMapping.hasOwnProperty(feed._id) ? commentMapping[feed._id].total : 0;\n      var _this$state5 = this.state,\n          isOpenComment = _this$state5.isOpenComment,\n          isLiked = _this$state5.isLiked,\n          totalComment = _this$state5.totalComment,\n          totalLike = _this$state5.totalLike,\n          isHovered = _this$state5.isHovered,\n          isBought = _this$state5.isBought,\n          openTipModal = _this$state5.openTipModal,\n          openPurchaseModal = _this$state5.openPurchaseModal,\n          submiting = _this$state5.submiting,\n          polls = _this$state5.polls,\n          isBookMarked = _this$state5.isBookMarked,\n          openTeaser = _this$state5.openTeaser,\n          openSubscriptionModal = _this$state5.openSubscriptionModal,\n          openReportModal = _this$state5.openReportModal,\n          requesting = _this$state5.requesting,\n          subscriptionType = _this$state5.subscriptionType;\n      var canView = !feed.isSale && feed.isSubscribed || feed.isSale && isBought || feed.type === 'text' || feed.isSale && !feed.price;\n\n      if (!(user !== null && user !== void 0 && user._id) || \"\".concat(user === null || user === void 0 ? void 0 : user._id) !== \"\".concat(feed === null || feed === void 0 ? void 0 : feed.fromSourceId) && user !== null && user !== void 0 && user.isPerformer) {\n        canView = false;\n      }\n\n      var images = feed.files && feed.files.filter(function (f) {\n        return f.type === 'feed-photo';\n      });\n      var videos = feed.files && feed.files.filter(function (f) {\n        return f.type === 'feed-video';\n      });\n      var thumbUrl = (feed === null || feed === void 0 ? void 0 : (_feed$thumbnail = feed.thumbnail) === null || _feed$thumbnail === void 0 ? void 0 : _feed$thumbnail.thumbnails) && (feed === null || feed === void 0 ? void 0 : (_feed$thumbnail2 = feed.thumbnail) === null || _feed$thumbnail2 === void 0 ? void 0 : _feed$thumbnail2.thumbnails[0]) || images && images[0] && ((_images$ = images[0]) === null || _images$ === void 0 ? void 0 : _images$.thumbnails) && ((_images$2 = images[0]) === null || _images$2 === void 0 ? void 0 : _images$2.thumbnails[0]) || (feed === null || feed === void 0 ? void 0 : feed.teaser) && (feed === null || feed === void 0 ? void 0 : (_feed$teaser = feed.teaser) === null || _feed$teaser === void 0 ? void 0 : _feed$teaser.thumbnails) && (feed === null || feed === void 0 ? void 0 : (_feed$teaser2 = feed.teaser) === null || _feed$teaser2 === void 0 ? void 0 : _feed$teaser2.thumbnails[0]) || videos && videos[0] && ((_videos$ = videos[0]) === null || _videos$ === void 0 ? void 0 : _videos$.thumbnails) && ((_videos$2 = videos[0]) === null || _videos$2 === void 0 ? void 0 : _videos$2.thumbnails[0]) || '/static/leaf.jpg';\n      var totalVote = 0;\n      polls && polls.forEach(function (poll) {\n        totalVote += poll.totalVote;\n      });\n\n      var menu = __jsx(Menu, {\n        key: \"menu_\".concat(feed._id)\n      }, __jsx(Menu.Item, {\n        key: \"post_detail_\".concat(feed._id)\n      }, __jsx(Link, {\n        href: {\n          pathname: '/post',\n          query: {\n            id: feed.slug || feed._id\n          }\n        },\n        as: \"/post/\".concat(feed.slug || feed._id)\n      }, __jsx(\"a\", null, \"Details\"))), user._id === feed.fromSourceId && __jsx(Menu.Item, {\n        key: \"edit_post_\".concat(feed._id)\n      }, __jsx(Link, {\n        href: {\n          pathname: '/model/my-post/edit',\n          query: {\n            id: feed._id\n          }\n        }\n      }, __jsx(\"a\", null, \"Edit post\"))), __jsx(Menu.Item, {\n        key: \"copy_link_\".concat(feed._id),\n        onClick: function onClick() {\n          return _this2.copyLink();\n        }\n      }, __jsx(\"a\", null, \"Copy link to clipboard\")), user._id === feed.fromSourceId && __jsx(Divider, {\n        style: {\n          margin: '10px 0'\n        }\n      }), user._id === feed.fromSourceId && __jsx(Menu.Item, {\n        key: \"delete_post_\".concat(feed._id)\n      }, __jsx(\"a\", {\n        \"aria-hidden\": true,\n        onClick: handleDelete.bind(this, feed)\n      }, \"Delete post\")));\n\n      var dropdown = __jsx(Dropdown, {\n        overlay: menu\n      }, __jsx(\"a\", {\n        \"aria-hidden\": true,\n        className: \"dropdown-options\",\n        onClick: function onClick(e) {\n          return e.preventDefault();\n        }\n      }, __jsx(MoreOutlined, null)));\n\n      return __jsx(\"div\", {\n        className: \"feed-card\"\n      }, __jsx(\"div\", {\n        className: \"feed-top\"\n      }, __jsx(Link, {\n        href: {\n          pathname: '/model/profile',\n          query: {\n            username: (performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id)\n          }\n        },\n        as: \"/\".concat((performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id))\n      }, __jsx(\"div\", {\n        className: \"feed-top-left\"\n      }, __jsx(Avatar, {\n        alt: \"per_atv\",\n        src: (performer === null || performer === void 0 ? void 0 : performer.avatar) || '/static/no-avatar.png',\n        size: 40\n      }), __jsx(\"div\", {\n        className: \"feed-name\"\n      }, __jsx(\"h4\", null, (performer === null || performer === void 0 ? void 0 : performer.name) || 'N/A', ' ', (performer === null || performer === void 0 ? void 0 : performer.verifiedAccount) && __jsx(TickIcon, null), \"\\xA0\\xA0\", (performer === null || performer === void 0 ? void 0 : performer.live) > 0 && (user === null || user === void 0 ? void 0 : user._id) !== (performer === null || performer === void 0 ? void 0 : performer._id) && __jsx(\"a\", {\n        \"aria-hidden\": true,\n        onClick: this.handleJoinStream,\n        className: \"live-status\"\n      }, \"Live\")), __jsx(\"h5\", null, \"@\", (performer === null || performer === void 0 ? void 0 : performer.username) || 'n/a')), !(performer !== null && performer !== void 0 && performer.isOnline) ? __jsx(\"span\", {\n        className: \"online-status\"\n      }) : __jsx(\"span\", {\n        className: \"online-status active\"\n      }))), __jsx(\"div\", {\n        className: \"feed-top-right\"\n      }, __jsx(\"span\", {\n        className: \"feed-time\"\n      }, formatDate(feed.updatedAt, 'MMM DD')), dropdown)), __jsx(\"div\", {\n        className: \"feed-container\"\n      }, __jsx(\"div\", {\n        className: \"feed-text\"\n      }, feed.text, polls && polls.length > 0 && __jsx(\"div\", {\n        className: \"feed-polls\"\n      }, feed.pollDescription && __jsx(\"h4\", {\n        className: \"p-question\"\n      }, feed.pollDescription), polls.map(function (poll) {\n        return __jsx(\"div\", {\n          \"aria-hidden\": true,\n          className: \"p-item\",\n          key: poll._id,\n          onClick: _this2.votePoll.bind(_this2, poll)\n        }, __jsx(\"span\", {\n          className: \"p-desc\"\n        }, poll === null || poll === void 0 ? void 0 : poll.description), ' ', __jsx(\"span\", null, (poll === null || poll === void 0 ? void 0 : poll.totalVote) || 0));\n      }), __jsx(\"div\", {\n        className: \"total-vote\"\n      }, __jsx(\"span\", null, \"Total\", ' ', shortenLargeNumber(totalVote), ' ', totalVote < 2 ? 'vote' : 'votes'), feed.pollExpiredAt && moment(feed.pollExpiredAt).isAfter(moment()) ? __jsx(\"span\", null, \"\".concat(moment(feed.pollExpiredAt).diff(moment(), 'days'), \"d \"), __jsx(ReactMomentCountDown, {\n        toDate: moment(feed.pollExpiredAt)\n      })) : __jsx(\"span\", null, \"Closed\")))), canView && __jsx(\"div\", {\n        className: \"feed-content\"\n      }, __jsx(FeedSlider, {\n        feed: feed\n      })), !canView && __jsx(\"div\", {\n        className: \"lock-content\"\n      }, __jsx(\"div\", {\n        className: \"feed-bg\",\n        style: {\n          backgroundImage: \"url(\".concat(thumbUrl, \")\"),\n          filter: thumbUrl === '/static/leaf.jpg' ? 'blur(2px)' : 'blur(20px)'\n        }\n      }), __jsx(\"div\", {\n        className: \"lock-middle\"\n      }, isHovered ? __jsx(UnlockOutlined, null) : __jsx(LockOutlined, null), !feed.isSale && !feed.isSubscribed && __jsx(Button, {\n        onMouseEnter: function onMouseEnter() {\n          return _this2.setState({\n            isHovered: true\n          });\n        },\n        onMouseLeave: function onMouseLeave() {\n          return _this2.setState({\n            isHovered: false\n          });\n        },\n        disabled: user.isPerformer,\n        className: \"secondary\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openSubscriptionModal: true\n          });\n        }\n      }, \"Subscribe to unlock\"), feed.isSale && feed.price > 0 && !isBought && __jsx(Button, {\n        onMouseEnter: function onMouseEnter() {\n          return _this2.setState({\n            isHovered: true\n          });\n        },\n        onMouseLeave: function onMouseLeave() {\n          return _this2.setState({\n            isHovered: false\n          });\n        },\n        disabled: user.isPerformer,\n        className: \"secondary\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openPurchaseModal: true\n          });\n        }\n      }, \"Pay $\", (feed.price || 0).toFixed(2), ' ', \"to unlock\"), feed.isSale && !feed.price && !user._id && __jsx(Button, {\n        onMouseEnter: function onMouseEnter() {\n          return _this2.setState({\n            isHovered: true\n          });\n        },\n        onMouseLeave: function onMouseLeave() {\n          return _this2.setState({\n            isHovered: false\n          });\n        },\n        disabled: user.isPerformer,\n        className: \"secondary\",\n        onClick: function onClick() {\n          return Router.push({\n            pathname: '/model/profile',\n            query: {\n              username: (performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id)\n            }\n          }, \"/\".concat((performer === null || performer === void 0 ? void 0 : performer.username) || (performer === null || performer === void 0 ? void 0 : performer._id)));\n        }\n      }, \"Follow for free\"), feed.teaser && __jsx(Button, {\n        className: \"teaser-btn\",\n        type: \"link\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openTeaser: true\n          });\n        }\n      }, \"View teaser\")), feed.files && feed.files.length > 0 && __jsx(\"div\", {\n        className: \"count-media\"\n      }, __jsx(\"span\", {\n        className: \"count-media-item\"\n      }, images.length > 0 && __jsx(\"span\", null, images.length, ' ', __jsx(FileImageOutlined, null), ' '), videos.length > 0 && images.length > 0 && '|', videos.length > 0 && __jsx(\"span\", null, videos.length > 1 && videos.length, ' ', __jsx(VideoCameraOutlined, null), ' ', videos.length === 1 && videoDuration(videos[0].duration)))))), __jsx(\"div\", {\n        className: \"feed-bottom\"\n      }, __jsx(\"div\", {\n        className: \"feed-actions\"\n      }, __jsx(\"div\", {\n        className: \"action-item\"\n      }, __jsx(\"span\", {\n        \"aria-hidden\": true,\n        className: isLiked ? 'action-ico active' : 'action-ico',\n        onClick: this.handleLike.bind(this)\n      }, __jsx(HeartOutlined, null), ' ', shortenLargeNumber(totalLike)), __jsx(\"span\", {\n        \"aria-hidden\": true,\n        className: isOpenComment ? 'action-ico active' : 'action-ico',\n        onClick: this.onOpenComment.bind(this)\n      }, __jsx(CommentOutlined, null), ' ', shortenLargeNumber(totalComment)), performer && __jsx(\"span\", {\n        \"aria-hidden\": true,\n        className: \"action-ico\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openTipModal: true\n          });\n        }\n      }, __jsx(DollarOutlined, null), ' ', \"Send tip\")), __jsx(\"div\", {\n        className: \"action-item\"\n      }, __jsx(\"span\", {\n        \"aria-hidden\": true,\n        className: openReportModal ? 'action-ico active' : 'action-ico',\n        onClick: function onClick() {\n          return _this2.setState({\n            openReportModal: true\n          });\n        }\n      }, __jsx(Tooltip, {\n        title: \"Report\"\n      }, __jsx(FlagOutlined, null))), __jsx(\"span\", {\n        \"aria-hidden\": true,\n        className: isBookMarked ? 'action-ico active' : 'action-ico',\n        onClick: this.handleBookmark.bind(this)\n      }, __jsx(Tooltip, {\n        title: !isBookMarked ? 'Add to Bookmarks' : 'Remove from Bookmarks'\n      }, __jsx(BookOutlined, null))))), isOpenComment && __jsx(\"div\", {\n        className: \"feed-comment\"\n      }, __jsx(CommentForm, {\n        creator: user,\n        onSubmit: handleCreateComment.bind(this),\n        objectId: feed._id,\n        objectType: \"feed\",\n        requesting: commenting,\n        siteName: siteName\n      }), __jsx(ListComments, {\n        key: \"list_comments_\".concat(feed._id, \"_\").concat(comments.length),\n        requesting: fetchingComment,\n        comments: comments,\n        total: totalComments,\n        onDelete: this.deleteComment.bind(this),\n        user: user,\n        canReply: true\n      }), comments.length < totalComments && __jsx(\"p\", {\n        className: \"text-center\"\n      }, __jsx(\"a\", {\n        \"aria-hidden\": true,\n        onClick: this.moreComment.bind(this)\n      }, \"More comments...\")))), __jsx(Modal, {\n        key: \"tip_performer\",\n        className: \"tip-modal\",\n        title: null,\n        width: 600,\n        visible: openTipModal,\n        onOk: function onOk() {\n          return _this2.setState({\n            openTipModal: false\n          });\n        },\n        footer: null,\n        onCancel: function onCancel() {\n          return _this2.setState({\n            openTipModal: false\n          });\n        }\n      }, __jsx(TipPerformerForm, {\n        performer: performer,\n        submiting: requesting,\n        onFinish: this.sendTip.bind(this)\n      })), __jsx(Modal, {\n        key: \"purchase_post\",\n        className: \"purchase-modal\",\n        title: null,\n        visible: openPurchaseModal,\n        footer: null,\n        width: 600,\n        destroyOnClose: true,\n        onCancel: function onCancel() {\n          return _this2.setState({\n            openPurchaseModal: false\n          });\n        }\n      }, __jsx(PurchaseFeedForm, {\n        feed: feed,\n        submiting: requesting,\n        onFinish: this.purchaseFeed.bind(this)\n      })), __jsx(Modal, {\n        key: \"report_post\",\n        className: \"subscription-modal\",\n        title: null,\n        visible: openReportModal,\n        footer: null,\n        destroyOnClose: true,\n        onCancel: function onCancel() {\n          return _this2.setState({\n            openReportModal: false\n          });\n        }\n      }, __jsx(ReportForm, {\n        performer: performer,\n        submiting: requesting,\n        onFinish: this.handleReport.bind(this)\n      })), __jsx(Modal, {\n        key: \"subscribe_performer\",\n        className: \"subscription-modal\",\n        width: 600,\n        centered: true,\n        title: null,\n        visible: openSubscriptionModal,\n        footer: null,\n        destroyOnClose: true,\n        onCancel: function onCancel() {\n          return _this2.setState({\n            openSubscriptionModal: false,\n            subscriptionType: ''\n          });\n        }\n      }, !subscriptionType ? __jsx(\"div\", {\n        className: \"subscription-btn-grp\"\n      }, __jsx(\"h2\", {\n        style: {\n          paddingTop: 25\n        }\n      }, \"SUBSCRIBE TO UNLOCK\"), (feed === null || feed === void 0 ? void 0 : (_feed$performer8 = feed.performer) === null || _feed$performer8 === void 0 ? void 0 : _feed$performer8.isFreeSubscription) && __jsx(Button, {\n        className: \"primary\",\n        disabled: !user || !user._id || submiting && subscriptionType === 'free',\n        onClick: function onClick() {\n          _this2.setState({\n            openSubscriptionModal: true,\n            subscriptionType: 'free'\n          });\n        }\n      }, \"SUBSCRIBE FOR FREE FOR\", ' ', (feed === null || feed === void 0 ? void 0 : (_feed$performer9 = feed.performer) === null || _feed$performer9 === void 0 ? void 0 : _feed$performer9.durationFreeSubscriptionDays) || 1, ' ', (feed === null || feed === void 0 ? void 0 : (_feed$performer10 = feed.performer) === null || _feed$performer10 === void 0 ? void 0 : _feed$performer10.durationFreeSubscriptionDays) > 1 ? 'DAYS' : 'DAY'), (feed === null || feed === void 0 ? void 0 : (_feed$performer11 = feed.performer) === null || _feed$performer11 === void 0 ? void 0 : _feed$performer11.monthlyPrice) && __jsx(Button, {\n        className: \"primary\",\n        disabled: !user || !user._id || submiting && subscriptionType === 'monthly',\n        onClick: function onClick() {\n          _this2.setState({\n            openSubscriptionModal: true,\n            subscriptionType: 'monthly'\n          });\n        }\n      }, \"MONTHLY SUBSCRIPTION FOR $\", ((feed === null || feed === void 0 ? void 0 : (_feed$performer12 = feed.performer) === null || _feed$performer12 === void 0 ? void 0 : _feed$performer12.monthlyPrice) || 0).toFixed(2)), (feed === null || feed === void 0 ? void 0 : feed.performer.yearlyPrice) && __jsx(Button, {\n        className: \"secondary\",\n        disabled: !user || !user._id || submiting && subscriptionType === 'yearly',\n        onClick: function onClick() {\n          _this2.setState({\n            openSubscriptionModal: true,\n            subscriptionType: 'yearly'\n          });\n        }\n      }, \"YEARLY SUBSCRIPTON FOR $\", ((feed === null || feed === void 0 ? void 0 : (_feed$performer13 = feed.performer) === null || _feed$performer13 === void 0 ? void 0 : _feed$performer13.yearlyPrice) || 0).toFixed(2))) : __jsx(ConfirmSubscriptionPerformerForm, {\n        type: subscriptionType,\n        performer: performer,\n        submiting: submiting,\n        onFinish: this.subscribe.bind(this)\n      })), __jsx(Modal, {\n        key: \"teaser_video\",\n        title: \"Teaser video\",\n        visible: openTeaser,\n        footer: null,\n        onCancel: function onCancel() {\n          return _this2.setState({\n            openTeaser: false\n          });\n        },\n        width: 650,\n        destroyOnClose: true,\n        className: \"modal-teaser-preview\"\n      }, __jsx(VideoPlayer, {\n        key: feed === null || feed === void 0 ? void 0 : (_feed$teaser3 = feed.teaser) === null || _feed$teaser3 === void 0 ? void 0 : _feed$teaser3._id,\n        autoplay: true,\n        controls: true,\n        playsinline: true,\n        fluid: true,\n        sources: [{\n          src: feed === null || feed === void 0 ? void 0 : (_feed$teaser4 = feed.teaser) === null || _feed$teaser4 === void 0 ? void 0 : _feed$teaser4.url,\n          type: 'video/mp4'\n        }]\n      })), submiting && __jsx(Loader, {\n        customText: \"We are processing your payment, please do not reload this page until it's done.\"\n      }));\n    }\n  }]);\n\n  return FeedCard;\n}(Component);\n\nvar mapStates = function mapStates(state) {\n  var _state$comment = state.comment,\n      commentMapping = _state$comment.commentMapping,\n      comment = _state$comment.comment;\n  return {\n    siteName: state.ui.siteName,\n    user: state.user.current,\n    commentMapping: commentMapping,\n    comment: comment,\n    settings: state.settings\n  };\n};\n\nvar mapDispatch = {\n  getComments: getComments,\n  moreComment: moreComment,\n  createComment: createComment,\n  deleteComment: deleteComment,\n  updateBalance: updateBalance\n};\nexport default connect(mapStates, mapDispatch)(FeedCard);","map":{"version":3,"sources":["c:/Users/Admin/Desktop/Work/foodiefans/foodiefans-main/user/src/components/post/post-card.tsx"],"names":["Component","Menu","Dropdown","Divider","message","Modal","Tooltip","Button","Avatar","HeartOutlined","CommentOutlined","BookOutlined","UnlockOutlined","MoreOutlined","DollarOutlined","LockOutlined","FlagOutlined","FileImageOutlined","VideoCameraOutlined","TickIcon","Link","CommentForm","ListComments","getComments","moreComment","createComment","deleteComment","formatDate","videoDuration","shortenLargeNumber","reactionService","feedService","tokenTransctionService","paymentService","reportService","connect","TipPerformerForm","ReactMomentCountDown","moment","VideoPlayer","ConfirmSubscriptionPerformerForm","ReportForm","Router","updateBalance","Loader","PurchaseFeedForm","FeedSlider","FeedCard","isOpenComment","isLiked","isBookMarked","isBought","totalLike","totalComment","isFirstLoadComment","itemPerPage","commentPage","isHovered","openTipModal","openPurchaseModal","openTeaser","submiting","polls","requesting","openSubscriptionModal","openReportModal","subscriptionType","props","user","feed","_id","error","isPerformer","isSubscribed","push","pathname","query","performer","JSON","stringify","username","state","setState","create","objectId","action","objectType","payload","target","targetId","performerId","fromSourceId","success","err","handleGetComment","limit","offset","str","window","location","origin","slug","el","document","createElement","value","setAttribute","style","position","left","body","appendChild","select","execCommand","removeChild","handleLoadMore","item","handleDelete","confirm","settings","paymentGateway","stripeCardIds","length","subscribePerformer","type","resp","href","data","paymentUrl","price","handleUpdateBalance","balance","sendTip","token","purchaseFeed","poll","isExpired","Date","pollExpiredAt","votePoll","index","findIndex","p","prevState","newItems","totalVote","prevProps","commentMapping","comment","total","onDelete","handleCreateComment","siteName","commenting","fetchingComment","hasOwnProperty","comments","items","totalComments","canView","isSale","images","files","filter","f","videos","thumbUrl","thumbnail","thumbnails","teaser","forEach","menu","id","copyLink","margin","bind","dropdown","e","preventDefault","avatar","name","verifiedAccount","live","handleJoinStream","isOnline","updatedAt","text","pollDescription","map","description","isAfter","diff","backgroundImage","toFixed","duration","handleLike","onOpenComment","handleBookmark","handleReport","paddingTop","isFreeSubscription","durationFreeSubscriptionDays","monthlyPrice","yearlyPrice","subscribe","autoplay","controls","playsinline","fluid","sources","src","url","mapStates","ui","current","mapDispatch"],"mappings":"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","sourcesContent":["/* eslint-disable no-prototype-builtins */\nimport { Component } from 'react';\nimport {\n  Menu, Dropdown, Divider, message, Modal, Tooltip, Button, Avatar\n} from 'antd';\nimport {\n  HeartOutlined, CommentOutlined, BookOutlined, UnlockOutlined,\n  MoreOutlined, DollarOutlined, LockOutlined, FlagOutlined,\n  FileImageOutlined, VideoCameraOutlined\n} from '@ant-design/icons';\nimport { TickIcon } from 'src/icons';\nimport Link from 'next/link';\nimport { CommentForm, ListComments } from '@components/comment';\nimport {\n  getComments, moreComment, createComment, deleteComment\n} from '@redux/comment/actions';\nimport { formatDate, videoDuration, shortenLargeNumber } from '@lib/index';\nimport {\n  reactionService, feedService, tokenTransctionService, paymentService, reportService\n} from '@services/index';\nimport { connect } from 'react-redux';\nimport { TipPerformerForm } from '@components/performer/tip-form';\nimport ReactMomentCountDown from 'react-moment-countdown';\nimport moment from 'moment';\nimport { VideoPlayer } from '@components/common/video-player';\nimport { ConfirmSubscriptionPerformerForm } from '@components/performer';\nimport { ReportForm } from '@components/report/report-form';\nimport Router from 'next/router';\nimport { updateBalance } from '@redux/user/actions';\nimport Loader from '@components/common/base/loader';\nimport { IFeed, ISettings, IUser } from 'src/interfaces';\nimport { PurchaseFeedForm } from './confirm-purchase';\nimport FeedSlider from './post-slider';\nimport './index.less';\n\ninterface IProps {\n  feed: IFeed;\n  onDelete?: Function;\n  user: IUser;\n  updateBalance: Function;\n  getComments: Function;\n  moreComment: Function;\n  createComment: Function;\n  deleteComment: Function;\n  commentMapping: any;\n  comment: any;\n  siteName: string;\n  settings: ISettings;\n}\n\nclass FeedCard extends Component<IProps> {\n  state = {\n    isOpenComment: false,\n    isLiked: false,\n    isBookMarked: false,\n    isBought: false,\n    totalLike: 0,\n    totalComment: 0,\n    isFirstLoadComment: true,\n    itemPerPage: 10,\n    commentPage: 0,\n    isHovered: false,\n    openTipModal: false,\n    openPurchaseModal: false,\n    openTeaser: false,\n    submiting: false,\n    polls: [],\n    requesting: false,\n    openSubscriptionModal: false,\n    openReportModal: false,\n    subscriptionType: ''\n  }\n\n  componentDidMount() {\n    const { feed } = this.props;\n    if (feed) {\n      this.setState({\n        isLiked: feed.isLiked,\n        isBookMarked: feed.isBookMarked,\n        isBought: feed.isBought,\n        totalLike: feed.totalLike,\n        totalComment: feed.totalComment,\n        polls: feed.polls ? feed.polls : []\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { feed, commentMapping, comment } = this.props;\n    const { totalComment } = this.state;\n    if ((!prevProps.comment.data && comment.data && comment.data.objectId === feed._id)\n      || (prevProps.commentMapping[feed._id] && totalComment !== commentMapping[feed._id].total)) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ totalComment: commentMapping[feed._id].total });\n    }\n  }\n\n  handleJoinStream = () => {\n    const { user, feed } = this.props;\n    if (!user._id) {\n      message.error('Please log in or register!');\n      return;\n    }\n    if (user.isPerformer) return;\n    if (!feed?.isSubscribed) {\n      message.error('Please subscribe to this model!');\n      return;\n    }\n    Router.push({\n      pathname: '/streaming/details',\n      query: {\n        performer: JSON.stringify(feed?.performer),\n        username: feed?.performer?.username || feed?.performer?._id\n      }\n    }, `/streaming/${feed?.performer?.username || feed?.performer?._id}`);\n  }\n\n  handleLike = async () => {\n    const { feed } = this.props;\n    const { isLiked, totalLike, requesting } = this.state;\n    if (requesting) return;\n    try {\n      await this.setState({ requesting: true });\n      if (!isLiked) {\n        await reactionService.create({\n          objectId: feed._id,\n          action: 'like',\n          objectType: 'feed'\n        });\n        this.setState({ isLiked: true, totalLike: totalLike + 1, requesting: false });\n      } else {\n        await reactionService.delete({\n          objectId: feed._id,\n          action: 'like',\n          objectType: 'feed'\n        });\n        this.setState({ isLiked: false, totalLike: totalLike - 1, requesting: false });\n      }\n    } catch (e) {\n      const error = await e;\n      message.error(error.message || 'Error occured, please try again later');\n      this.setState({ requesting: false });\n    }\n  }\n\n  handleBookmark = async () => {\n    const { feed, user } = this.props;\n    const { isBookMarked, requesting } = this.state;\n    if (requesting || !user._id || user.isPerformer) return;\n    try {\n      await this.setState({ requesting: true });\n      if (!isBookMarked) {\n        await reactionService.create({\n          objectId: feed._id,\n          action: 'book_mark',\n          objectType: 'feed'\n        });\n        this.setState({ isBookMarked: true, requesting: false });\n      } else {\n        await reactionService.delete({\n          objectId: feed._id,\n          action: 'book_mark',\n          objectType: 'feed'\n        });\n        this.setState({ isBookMarked: false, requesting: false });\n      }\n    } catch (e) {\n      const error = await e;\n      message.error(error.message || 'Error occured, please try again later');\n      this.setState({ requesting: false });\n    }\n  }\n\n  handleReport = async (payload: any) => {\n    const { feed } = this.props;\n    try {\n      await this.setState({ requesting: true });\n      await reportService.create({\n        ...payload, target: 'feed', targetId: feed._id, performerId: feed.fromSourceId\n      });\n      message.success('Your report has been sent');\n    } catch (e) {\n      const err = await e;\n      message.error(err.message || 'error occured, please try again later');\n    } finally {\n      this.setState({ requesting: false, openReportModal: false });\n    }\n  }\n\n  onOpenComment = () => {\n    const { feed, getComments: handleGetComment } = this.props;\n    const {\n      isOpenComment, isFirstLoadComment, itemPerPage, commentPage\n    } = this.state;\n    this.setState({ isOpenComment: !isOpenComment });\n    if (isFirstLoadComment) {\n      this.setState({ isFirstLoadComment: false });\n      handleGetComment({\n        objectId: feed._id,\n        limit: itemPerPage,\n        offset: commentPage\n      });\n    }\n  }\n\n  copyLink = () => {\n    const { feed } = this.props;\n    const str = `${window.location.origin}/post/${feed?.slug || feed?._id}`;\n    const el = document.createElement('textarea');\n    el.value = str;\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    message.success('Copied to clipboard');\n  }\n\n  moreComment = async () => {\n    const { feed, moreComment: handleLoadMore } = this.props;\n    const { commentPage, itemPerPage } = this.state;\n    this.setState({\n      commentPage: commentPage + 1\n    });\n    handleLoadMore({\n      limit: itemPerPage,\n      offset: (commentPage + 1) * itemPerPage,\n      objectId: feed._id\n    });\n  }\n\n  deleteComment = (item) => {\n    const { deleteComment: handleDelete } = this.props;\n    if (!window.confirm('Are you sure to remove this comment?')) return;\n    handleDelete(item._id);\n  }\n\n  subscribe = async () => {\n    const { feed, user, settings } = this.props;\n    const { subscriptionType } = this.state;\n    if (!user._id) {\n      message.error('Please log in!');\n      Router.push('/');\n      return;\n    }\n    if (user.isPerformer) return;\n    if (settings.paymentGateway === 'stripe' && !user.stripeCardIds.length) {\n      message.error('Please add payment card');\n      Router.push('/user/cards');\n      return;\n    }\n    try {\n      this.setState({ submiting: true });\n      const resp = await paymentService.subscribePerformer({\n        type: subscriptionType || 'monthly',\n        performerId: feed.fromSourceId,\n        paymentGateway: settings.paymentGateway\n      });\n      if (settings.paymentGateway === 'ccbill') {\n        window.location.href = resp?.data?.paymentUrl;\n      } else {\n        this.setState({ openSubscriptionModal: false });\n      }\n    } catch (e) {\n      const err = await e;\n      message.error(err.message || 'error occured, please try again later');\n      this.setState({ openSubscriptionModal: false, submiting: false });\n    }\n  }\n\n  sendTip = async (price) => {\n    const { feed, user, updateBalance: handleUpdateBalance } = this.props;\n    if (user._id === feed?.performer?._id) {\n      message.error('Models cannot tip for themselves');\n      return;\n    }\n    if (user.balance < price) {\n      message.error('Your wallet balance is not enough');\n      Router.push('/wallet');\n      return;\n    }\n    try {\n      await this.setState({ requesting: true });\n      await tokenTransctionService.sendTip(feed?.performer?._id, { performerId: feed?.performer?._id, price });\n      message.success('Thank you for the tip');\n      handleUpdateBalance({ token: -price });\n    } catch (e) {\n      const err = await e;\n      message.error(err.message || 'error occured, please try again later');\n    } finally {\n      this.setState({ requesting: false, openTipModal: false });\n    }\n  }\n\n  purchaseFeed = async () => {\n    const { feed, user, updateBalance: handleUpdateBalance } = this.props;\n    if (user.balance < feed.price) {\n      message.error('Your wallet balance is not enough');\n      Router.push('/wallet');\n      return;\n    }\n    try {\n      await this.setState({ requesting: true });\n      await tokenTransctionService.purchaseFeed(feed._id, {});\n      message.success('Unlocked successfully!');\n      this.setState({ isBought: true });\n      handleUpdateBalance({ token: -feed.price });\n    } catch (e) {\n      const error = await e;\n      message.error(error.message || 'Error occured, please try again later');\n    } finally {\n      this.setState({ requesting: false, openPurchaseModal: false });\n    }\n  }\n\n  votePoll = async (poll: any) => {\n    const { feed } = this.props;\n    const { polls } = this.state;\n    const isExpired = new Date(feed.pollExpiredAt) < new Date();\n    if (isExpired) {\n      message.error('The poll is now closed');\n      return;\n    }\n    if (!window.confirm('Vote it?')) return;\n    try {\n      await this.setState({ requesting: true });\n      await feedService.votePoll(poll._id);\n      const index = polls.findIndex((p) => p._id === poll._id);\n      await this.setState((prevState: any) => {\n        const newItems = [...prevState.polls];\n        newItems[index].totalVote += 1;\n        return { polls: newItems, requesting: false };\n      });\n    } catch (e) {\n      const error = await e;\n      message.error(error.message || 'Something went wrong, please try again later');\n      this.setState({ requesting: false });\n    }\n  }\n\n  render() {\n    const {\n      feed, user, commentMapping, comment, onDelete: handleDelete, createComment: handleCreateComment, siteName\n    } = this.props;\n    const { performer } = feed;\n    const { requesting: commenting } = comment;\n    const fetchingComment = commentMapping.hasOwnProperty(feed._id) ? commentMapping[feed._id].requesting : false;\n    const comments = commentMapping.hasOwnProperty(feed._id) ? commentMapping[feed._id].items : [];\n    const totalComments = commentMapping.hasOwnProperty(feed._id) ? commentMapping[feed._id].total : 0;\n    const {\n      isOpenComment, isLiked, totalComment, totalLike, isHovered, isBought,\n      openTipModal, openPurchaseModal, submiting, polls, isBookMarked,\n      openTeaser, openSubscriptionModal, openReportModal, requesting, subscriptionType\n    } = this.state;\n    let canView = (!feed.isSale && feed.isSubscribed)\n    || (feed.isSale && isBought)\n    || feed.type === 'text'\n    || (feed.isSale && !feed.price);\n\n    if (!user?._id || (`${user?._id}` !== `${feed?.fromSourceId}` && user?.isPerformer)) {\n      canView = false;\n    }\n    const images = feed.files && feed.files.filter((f) => f.type === 'feed-photo');\n    const videos = feed.files && feed.files.filter((f) => f.type === 'feed-video');\n    const thumbUrl = (feed?.thumbnail?.thumbnails && feed?.thumbnail?.thumbnails[0])\n      || (images && images[0] && images[0]?.thumbnails && images[0]?.thumbnails[0])\n      || (feed?.teaser && feed?.teaser?.thumbnails && feed?.teaser?.thumbnails[0])\n      || (videos && videos[0] && videos[0]?.thumbnails && videos[0]?.thumbnails[0])\n      || '/static/leaf.jpg';\n    let totalVote = 0;\n    polls && polls.forEach((poll) => {\n      totalVote += poll.totalVote;\n    });\n    const menu = (\n      <Menu key={`menu_${feed._id}`}>\n        <Menu.Item key={`post_detail_${feed._id}`}>\n          <Link href={{ pathname: '/post', query: { id: feed.slug || feed._id } }} as={`/post/${feed.slug || feed._id}`}>\n            <a>\n              Details\n            </a>\n          </Link>\n        </Menu.Item>\n        {user._id === feed.fromSourceId && (\n          <Menu.Item key={`edit_post_${feed._id}`}>\n            <Link href={{ pathname: '/model/my-post/edit', query: { id: feed._id } }}>\n              <a>\n                Edit post\n              </a>\n            </Link>\n          </Menu.Item>\n        )}\n        <Menu.Item key={`copy_link_${feed._id}`} onClick={() => this.copyLink()}>\n          <a>\n            Copy link to clipboard\n          </a>\n        </Menu.Item>\n        {user._id === feed.fromSourceId && <Divider style={{ margin: '10px 0' }} />}\n        {user._id === feed.fromSourceId && <Menu.Item key={`delete_post_${feed._id}`}><a aria-hidden onClick={handleDelete.bind(this, feed)}>Delete post</a></Menu.Item>}\n      </Menu>\n    );\n    const dropdown = (\n      <Dropdown overlay={menu}>\n        <a aria-hidden className=\"dropdown-options\" onClick={(e) => e.preventDefault()}>\n          <MoreOutlined />\n        </a>\n      </Dropdown>\n    );\n\n    return (\n      <div className=\"feed-card\">\n        <div className=\"feed-top\">\n          <Link href={{ pathname: '/model/profile', query: { username: performer?.username || performer?._id } }} as={`/${performer?.username || performer?._id}`}>\n            <div className=\"feed-top-left\">\n              <Avatar alt=\"per_atv\" src={performer?.avatar || '/static/no-avatar.png'} size={40} />\n              <div className=\"feed-name\">\n                <h4>\n                  {performer?.name || 'N/A'}\n                  {' '}\n                  {performer?.verifiedAccount && <TickIcon />}\n                  &nbsp;&nbsp;\n                  {performer?.live > 0 && user?._id !== performer?._id && <a aria-hidden onClick={this.handleJoinStream} className=\"live-status\">Live</a>}\n                </h4>\n                <h5>\n                  @\n                  {performer?.username || 'n/a'}\n                </h5>\n              </div>\n              {!performer?.isOnline ? <span className=\"online-status\" /> : <span className=\"online-status active\" />}\n            </div>\n          </Link>\n          <div className=\"feed-top-right\">\n            <span className=\"feed-time\">{formatDate(feed.updatedAt, 'MMM DD')}</span>\n            {dropdown}\n          </div>\n        </div>\n        <div className=\"feed-container\">\n          <div className=\"feed-text\">\n            {feed.text}\n            {polls && polls.length > 0 && (\n              <div className=\"feed-polls\">\n                {feed.pollDescription && <h4 className=\"p-question\">{feed.pollDescription}</h4>}\n                {polls.map((poll) => (\n                  <div aria-hidden className=\"p-item\" key={poll._id} onClick={this.votePoll.bind(this, poll)}>\n                    <span className=\"p-desc\">{poll?.description}</span>\n                    {' '}\n                    <span>{poll?.totalVote || 0}</span>\n                  </div>\n                ))}\n                <div className=\"total-vote\">\n                  <span>\n                    Total\n                    {' '}\n                    {shortenLargeNumber(totalVote)}\n                    {' '}\n                    {totalVote < 2 ? 'vote' : 'votes'}\n                  </span>\n                  {feed.pollExpiredAt && moment(feed.pollExpiredAt).isAfter(moment()) ? (\n                    <span>\n                      {`${moment(feed.pollExpiredAt).diff(moment(), 'days')}d `}\n                      <ReactMomentCountDown toDate={moment(feed.pollExpiredAt)} />\n                    </span>\n                  ) : <span>Closed</span>}\n                </div>\n              </div>\n            )}\n          </div>\n          {canView && (\n            <div className=\"feed-content\">\n              <FeedSlider feed={feed} />\n            </div>\n          )}\n          {!canView && (\n            <div className=\"lock-content\">\n              {/* eslint-disable-next-line no-nested-ternary */}\n              <div className=\"feed-bg\" style={{ backgroundImage: `url(${thumbUrl})`, filter: thumbUrl === '/static/leaf.jpg' ? 'blur(2px)' : 'blur(20px)' }} />\n              <div className=\"lock-middle\">\n                {(isHovered) ? <UnlockOutlined /> : <LockOutlined />}\n                {!feed.isSale && !feed.isSubscribed && (\n                  <Button\n                    onMouseEnter={() => this.setState({ isHovered: true })}\n                    onMouseLeave={() => this.setState({ isHovered: false })}\n                    disabled={user.isPerformer}\n                    className=\"secondary\"\n                    onClick={() => this.setState({ openSubscriptionModal: true })}\n                  >\n                    Subscribe to unlock\n                  </Button>\n                )}\n                {feed.isSale && feed.price > 0 && !isBought && (\n                  <Button\n                    onMouseEnter={() => this.setState({ isHovered: true })}\n                    onMouseLeave={() => this.setState({ isHovered: false })}\n                    disabled={user.isPerformer}\n                    className=\"secondary\"\n                    onClick={() => this.setState({ openPurchaseModal: true })}\n                  >\n                    Pay $\n                    {(feed.price || 0).toFixed(2)}\n                    {' '}\n                    to unlock\n                  </Button>\n                )}\n                {(feed.isSale && !feed.price && !user._id) && (\n                <Button\n                  onMouseEnter={() => this.setState({ isHovered: true })}\n                  onMouseLeave={() => this.setState({ isHovered: false })}\n                  disabled={user.isPerformer}\n                  className=\"secondary\"\n                  onClick={() => Router.push({ pathname: '/model/profile', query: { username: performer?.username || performer?._id } }, `/${performer?.username || performer?._id}`)}\n                >\n                  Follow for free\n                </Button>\n                )}\n                {feed.teaser && (\n                  <Button className=\"teaser-btn\" type=\"link\" onClick={() => this.setState({ openTeaser: true })}>\n                    View teaser\n                  </Button>\n                )}\n              </div>\n              {feed.files && feed.files.length > 0 && (\n                <div className=\"count-media\">\n                  <span className=\"count-media-item\">\n                    {images.length > 0 && (\n                      <span>\n                        {images.length}\n                        {' '}\n                        <FileImageOutlined />\n                        {' '}\n                      </span>\n                    )}\n                    {videos.length > 0 && images.length > 0 && '|'}\n                    {videos.length > 0 && (\n                      <span>\n                        {videos.length > 1 && videos.length}\n                        {' '}\n                        <VideoCameraOutlined />\n                        {' '}\n                        {videos.length === 1 && videoDuration(videos[0].duration)}\n                      </span>\n                    )}\n                  </span>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n        <div className=\"feed-bottom\">\n          <div className=\"feed-actions\">\n            <div className=\"action-item\">\n              <span aria-hidden className={isLiked ? 'action-ico active' : 'action-ico'} onClick={this.handleLike.bind(this)}>\n                <HeartOutlined />\n                {' '}\n                {shortenLargeNumber(totalLike)}\n              </span>\n              <span aria-hidden className={isOpenComment ? 'action-ico active' : 'action-ico'} onClick={this.onOpenComment.bind(this)}>\n                <CommentOutlined />\n                {' '}\n                {shortenLargeNumber(totalComment)}\n              </span>\n              {performer && (\n                <span aria-hidden className=\"action-ico\" onClick={() => this.setState({ openTipModal: true })}>\n                  <DollarOutlined />\n                  {' '}\n                  Send tip\n                </span>\n              )}\n            </div>\n            <div className=\"action-item\">\n              <span aria-hidden className={openReportModal ? 'action-ico active' : 'action-ico'} onClick={() => this.setState({ openReportModal: true })}>\n                <Tooltip title=\"Report\"><FlagOutlined /></Tooltip>\n              </span>\n              <span aria-hidden className={isBookMarked ? 'action-ico active' : 'action-ico'} onClick={this.handleBookmark.bind(this)}>\n                <Tooltip title={!isBookMarked ? 'Add to Bookmarks' : 'Remove from Bookmarks'}><BookOutlined /></Tooltip>\n              </span>\n            </div>\n          </div>\n          {isOpenComment && (\n            <div className=\"feed-comment\">\n              <CommentForm\n                creator={user}\n                onSubmit={handleCreateComment.bind(this)}\n                objectId={feed._id}\n                objectType=\"feed\"\n                requesting={commenting}\n                siteName={siteName}\n              />\n              <ListComments\n                key={`list_comments_${feed._id}_${comments.length}`}\n                requesting={fetchingComment}\n                comments={comments}\n                total={totalComments}\n                onDelete={this.deleteComment.bind(this)}\n                user={user}\n                canReply\n              />\n              {comments.length < totalComments && <p className=\"text-center\"><a aria-hidden onClick={this.moreComment.bind(this)}>More comments...</a></p>}\n            </div>\n          )}\n        </div>\n        <Modal\n          key=\"tip_performer\"\n          className=\"tip-modal\"\n          title={null}\n          width={600}\n          visible={openTipModal}\n          onOk={() => this.setState({ openTipModal: false })}\n          footer={null}\n          onCancel={() => this.setState({ openTipModal: false })}\n        >\n          <TipPerformerForm performer={performer} submiting={requesting} onFinish={this.sendTip.bind(this)} />\n        </Modal>\n        <Modal\n          key=\"purchase_post\"\n          className=\"purchase-modal\"\n          title={null}\n          visible={openPurchaseModal}\n          footer={null}\n          width={600}\n          destroyOnClose\n          onCancel={() => this.setState({ openPurchaseModal: false })}\n        >\n          <PurchaseFeedForm feed={feed} submiting={requesting} onFinish={this.purchaseFeed.bind(this)} />\n        </Modal>\n        <Modal\n          key=\"report_post\"\n          className=\"subscription-modal\"\n          title={null}\n          visible={openReportModal}\n          footer={null}\n          destroyOnClose\n          onCancel={() => this.setState({ openReportModal: false })}\n        >\n          <ReportForm performer={performer} submiting={requesting} onFinish={this.handleReport.bind(this)} />\n        </Modal>\n        <Modal\n          key=\"subscribe_performer\"\n          className=\"subscription-modal\"\n          width={600}\n          centered\n          title={null}\n          visible={openSubscriptionModal}\n          footer={null}\n          destroyOnClose\n          onCancel={() => this.setState({ openSubscriptionModal: false, subscriptionType: '' })}\n        >\n          {!subscriptionType ? (\n            <div\n              className=\"subscription-btn-grp\"\n            >\n              <h2 style={{ paddingTop: 25 }}>SUBSCRIBE TO UNLOCK</h2>\n              {feed?.performer?.isFreeSubscription && (\n              <Button\n                className=\"primary\"\n                disabled={!user || !user._id || (submiting && subscriptionType === 'free')}\n                onClick={() => {\n                  this.setState({ openSubscriptionModal: true, subscriptionType: 'free' });\n                }}\n              >\n                SUBSCRIBE FOR FREE FOR\n                {' '}\n                {feed?.performer?.durationFreeSubscriptionDays || 1}\n                {' '}\n                {feed?.performer?.durationFreeSubscriptionDays > 1 ? 'DAYS' : 'DAY'}\n              </Button>\n              )}\n              {feed?.performer?.monthlyPrice && (\n              <Button\n                className=\"primary\"\n                disabled={!user || !user._id || (submiting && subscriptionType === 'monthly')}\n                onClick={() => {\n                  this.setState({ openSubscriptionModal: true, subscriptionType: 'monthly' });\n                }}\n              >\n                MONTHLY SUBSCRIPTION FOR $\n                {(feed?.performer?.monthlyPrice || 0).toFixed(2)}\n              </Button>\n              )}\n              {feed?.performer.yearlyPrice && (\n              <Button\n                className=\"secondary\"\n                disabled={!user || !user._id || (submiting && subscriptionType === 'yearly')}\n                onClick={() => {\n                  this.setState({ openSubscriptionModal: true, subscriptionType: 'yearly' });\n                }}\n              >\n                YEARLY SUBSCRIPTON FOR $\n                {(feed?.performer?.yearlyPrice || 0).toFixed(2)}\n              </Button>\n              )}\n            </div>\n          ) : (\n            <ConfirmSubscriptionPerformerForm\n              type={subscriptionType}\n              performer={performer}\n              submiting={submiting}\n              onFinish={this.subscribe.bind(this)}\n            />\n          )}\n        </Modal>\n        <Modal\n          key=\"teaser_video\"\n          title=\"Teaser video\"\n          visible={openTeaser}\n          footer={null}\n          onCancel={() => this.setState({ openTeaser: false })}\n          width={650}\n          destroyOnClose\n          className=\"modal-teaser-preview\"\n        >\n          <VideoPlayer\n            key={feed?.teaser?._id}\n            {...{\n              autoplay: true,\n              controls: true,\n              playsinline: true,\n              fluid: true,\n              sources: [\n                {\n                  src: feed?.teaser?.url,\n                  type: 'video/mp4'\n                }\n              ]\n            }}\n          />\n        </Modal>\n        {submiting && <Loader customText=\"We are processing your payment, please do not reload this page until it's done.\" />}\n      </div>\n    );\n  }\n}\n\nconst mapStates = (state: any) => {\n  const { commentMapping, comment } = state.comment;\n  return {\n    siteName: state.ui.siteName,\n    user: state.user.current,\n    commentMapping,\n    comment,\n    settings: state.settings\n  };\n};\n\nconst mapDispatch = {\n  getComments, moreComment, createComment, deleteComment, updateBalance\n};\nexport default connect(mapStates, mapDispatch)(FeedCard);\n"]},"metadata":{},"sourceType":"module"}