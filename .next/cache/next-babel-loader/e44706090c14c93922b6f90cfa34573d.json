{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { PureComponent } from 'react';\nimport { Layout, Badge, Drawer, Divider, Avatar } from 'antd';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport { logout } from '@redux/auth/actions';\nimport { ShoppingCartOutlined, UserOutlined, HistoryOutlined, CreditCardOutlined, VideoCameraOutlined, FireOutlined, NotificationOutlined, BookOutlined, DollarOutlined, PictureOutlined, StarOutlined, ShoppingOutlined, BankOutlined, LogoutOutlined, HeartOutlined, BlockOutlined, PlusCircleOutlined, StopOutlined } from '@ant-design/icons';\nimport { HomeIcon, ModelIcon, PlusIcon, MessageIcon, UserIcon, LiveIcon, TickIcon, WalletSvg } from 'src/icons';\nimport Router, { withRouter, Router as RouterEvent } from 'next/router';\nimport { messageService, authService } from 'src/services';\nimport { Event, SocketContext } from 'src/socket';\nimport { addPrivateRequest, accessPrivateRequest } from '@redux/streaming/actions';\nimport { updateUIValue } from 'src/redux/ui/actions';\nimport { updateBalance } from '@redux/user/actions';\nimport { shortenLargeNumber } from '@lib/number';\nimport { SubscribePerformerModal } from 'src/components/subscription/subscribe-performer-modal';\nimport './header.less';\n\nvar Header = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Header, _PureComponent);\n\n  var _super = _createSuper(Header);\n\n  function Header() {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      totalNotReadMessage: 0,\n      openProfile: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeRoute\", function () {\n      _this.setState({\n        openProfile: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMessage\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event && _this.setState({\n                  totalNotReadMessage: event.total\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubscribe\", function (username) {\n      Router.push({\n        pathname: '/streaming/details',\n        query: {\n          username: username\n        }\n      }, \"/streaming/\".concat(username));\n    });\n\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      RouterEvent.events.on('routeChangeStart', this.handleChangeRoute);\n      var user = this.props.user;\n\n      if (user._id) {\n        this.handleCountNotificationMessage();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var user = this.props.user;\n\n      if (user._id && prevProps.user._id !== user._id) {\n        this.handleCountNotificationMessage();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      RouterEvent.events.off('routeChangeStart', this.handleChangeRoute);\n      var token = authService.getToken();\n      var socket = this.context;\n      token && socket && socket.emit('auth/logout', {\n        token: token\n      });\n    }\n  }, {\n    key: \"handleCountNotificationMessage\",\n    value: function () {\n      var _handleCountNotificationMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return messageService.countTotalNotRead();\n\n              case 2:\n                _context2.next = 4;\n                return _context2.sent.data;\n\n              case 4:\n                data = _context2.sent;\n\n                if (data) {\n                  this.setState({\n                    totalNotReadMessage: data.total\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleCountNotificationMessage() {\n        return _handleCountNotificationMessage.apply(this, arguments);\n      }\n\n      return handleCountNotificationMessage;\n    }()\n  }, {\n    key: \"handleUpdateBalance\",\n    value: function () {\n      var _handleUpdateBalance = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n        var _this$props, user, handleUpdateBalance;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$props = this.props, user = _this$props.user, handleUpdateBalance = _this$props.updateBalance;\n\n                if (user.isPerformer) {\n                  handleUpdateBalance({\n                    token: event.token\n                  });\n                }\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleUpdateBalance(_x2) {\n        return _handleUpdateBalance.apply(this, arguments);\n      }\n\n      return handleUpdateBalance;\n    }()\n  }, {\n    key: \"handlePaymentStatusCallback\",\n    value: function () {\n      var _handlePaymentStatusCallback = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref2) {\n        var redirectUrl;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                redirectUrl = _ref2.redirectUrl;\n\n                if (redirectUrl) {\n                  window.location.href = redirectUrl;\n                }\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function handlePaymentStatusCallback(_x3) {\n        return _handlePaymentStatusCallback.apply(this, arguments);\n      }\n\n      return handlePaymentStatusCallback;\n    }()\n  }, {\n    key: \"beforeLogout\",\n    value: function () {\n      var _beforeLogout = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var handleLogout, token, socket;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                handleLogout = this.props.logout;\n                token = authService.getToken();\n                socket = this.context;\n                _context5.t0 = token && socket;\n\n                if (!_context5.t0) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                _context5.next = 7;\n                return socket.emit('auth/logout', {\n                  token: token\n                });\n\n              case 7:\n                handleLogout();\n\n              case 8:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function beforeLogout() {\n        return _beforeLogout.apply(this, arguments);\n      }\n\n      return beforeLogout;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this,\n          _user$stats,\n          _user$stats2;\n\n      var _this$props2 = this.props,\n          user = _this$props2.user,\n          router = _this$props2.router,\n          ui = _this$props2.ui,\n          settings = _this$props2.settings,\n          config = _this$props2.config;\n      var _this$state = this.state,\n          totalNotReadMessage = _this$state.totalNotReadMessage,\n          openProfile = _this$state.openProfile;\n      return __jsx(\"div\", {\n        className: \"main-header\"\n      }, __jsx(Event, {\n        event: \"nofify_read_messages_in_conversation\",\n        handler: this.handleMessage.bind(this)\n      }), __jsx(Event, {\n        event: \"update_balance\",\n        handler: this.handleUpdateBalance.bind(this)\n      }), __jsx(Event, {\n        event: \"payment_status_callback\",\n        handler: this.handlePaymentStatusCallback.bind(this)\n      }), __jsx(\"div\", {\n        className: \"main-container\"\n      }, __jsx(Layout.Header, {\n        className: \"header\",\n        id: \"layoutHeader\"\n      }, __jsx(\"div\", {\n        className: \"nav-bar\"\n      }, __jsx(\"ul\", {\n        className: user._id ? 'nav-icons' : 'nav-icons custom'\n      }, user._id && __jsx(\"li\", {\n        className: router.pathname === '/home' ? 'active' : ''\n      }, __jsx(Link, {\n        href: \"/home\"\n      }, __jsx(\"a\", null, __jsx(HomeIcon, null)))), user._id && __jsx(React.Fragment, null, (user === null || user === void 0 ? void 0 : user.isPerformer) && __jsx(\"li\", {\n        className: router.pathname === '/model/my-post/create' ? 'active' : ''\n      }, __jsx(Link, {\n        href: \"/model/my-post/create\"\n      }, __jsx(\"a\", null, __jsx(PlusIcon, null))))), user._id && !user.isPerformer && __jsx(\"li\", {\n        key: \"model\",\n        className: router.pathname === '/model' ? 'active' : ''\n      }, __jsx(Link, {\n        href: \"/model\"\n      }, __jsx(\"a\", null, __jsx(ModelIcon, null)))), user._id && __jsx(\"li\", {\n        key: \"messenger\",\n        className: router.pathname === '/messages' ? 'active' : ''\n      }, __jsx(Link, {\n        href: \"/messages\"\n      }, __jsx(\"a\", null, __jsx(MessageIcon, null), __jsx(Badge, {\n        className: \"cart-total\",\n        count: totalNotReadMessage,\n        showZero: true\n      })))), !user._id && [__jsx(\"li\", {\n        key: \"logo\",\n        className: \"logo-nav\"\n      }, __jsx(Link, {\n        href: \"/home\"\n      }, __jsx(\"a\", null, ui.logo ? __jsx(\"img\", {\n        src: ui.logo,\n        alt: \"logo\"\n      }) : \"\".concat(ui.siteName)))), __jsx(\"li\", {\n        key: \"login\",\n        className: router.pathname === '/' ? 'active' : ''\n      }, __jsx(Link, {\n        href: \"/\"\n      }, __jsx(\"a\", null, \"Log In\"))), __jsx(\"li\", {\n        key: \"signup\",\n        className: router.pathname === '/auth/register' ? 'active' : ''\n      }, __jsx(Link, {\n        href: \"/auth/register\"\n      }, __jsx(\"a\", null, \"Sign Up\")))], user._id && __jsx(\"li\", {\n        key: \"avatar\",\n        \"aria-hidden\": true,\n        onClick: function onClick() {\n          return _this2.setState({\n            openProfile: true\n          });\n        }\n      }, user !== null && user !== void 0 && user.avatar ? __jsx(Avatar, {\n        src: (user === null || user === void 0 ? void 0 : user.avatar) || '/static/no-avatar.png'\n      }) : __jsx(UserIcon, null))))), __jsx(Drawer, {\n        title: __jsx(React.Fragment, null, __jsx(\"div\", {\n          className: \"profile-user\"\n        }, __jsx(\"img\", {\n          className: \"avatar\",\n          src: (user === null || user === void 0 ? void 0 : user.avatar) || '/static/no-avatar.png',\n          alt: \"avatar\"\n        }), __jsx(\"span\", {\n          className: \"profile-name\"\n        }, __jsx(\"span\", null, (user === null || user === void 0 ? void 0 : user.name) || 'N/A', ' ', __jsx(TickIcon, null)), __jsx(\"span\", {\n          className: \"sub-name\"\n        }, \"@\", (user === null || user === void 0 ? void 0 : user.username) || 'n/a'))), __jsx(\"div\", {\n          className: \"sub-info\"\n        }, __jsx(\"a\", {\n          \"aria-hidden\": true,\n          className: \"user-balance\",\n          onClick: function onClick() {\n            return !(user !== null && user !== void 0 && user.isPerformer) ? Router.push('/wallet') : Router.push('/model/earning');\n          }\n        }, __jsx(WalletSvg, null), ' ', \"$\", ((user === null || user === void 0 ? void 0 : user.balance) || 0).toFixed(2), !(user !== null && user !== void 0 && user.isPerformer) && __jsx(PlusCircleOutlined, null)), user.isPerformer ? __jsx(Link, {\n          href: \"/model/my-subscriber\"\n        }, __jsx(\"a\", null, __jsx(StarOutlined, null), \"Subscribers\", ' ', shortenLargeNumber((user === null || user === void 0 ? void 0 : (_user$stats = user.stats) === null || _user$stats === void 0 ? void 0 : _user$stats.subscribers) || 0))) : __jsx(Link, {\n          href: \"/user/my-subscription\"\n        }, __jsx(\"a\", null, __jsx(HeartOutlined, null), \"Subscription\", ' ', shortenLargeNumber((user === null || user === void 0 ? void 0 : (_user$stats2 = user.stats) === null || _user$stats2 === void 0 ? void 0 : _user$stats2.totalSubscriptions) || 0))))),\n        closable: true,\n        onClose: function onClose() {\n          return _this2.setState({\n            openProfile: false\n          });\n        },\n        visible: openProfile,\n        key: \"profile-drawer\",\n        className: ui.theme === 'light' ? 'profile-drawer' : 'profile-drawer dark',\n        width: 280\n      }, user.isPerformer && __jsx(\"div\", {\n        className: \"profile-menu-item\"\n      }, (settings === null || settings === void 0 ? void 0 : settings.agoraEnable) && __jsx(Link, {\n        href: {\n          pathname: '/model/live'\n        },\n        as: \"/model/live\"\n      }, __jsx(\"div\", {\n        className: router.asPath === '/model/live' ? 'menu-item active' : 'menu-item'\n      }, __jsx(LiveIcon, null), ' ', \"Go Live\")), __jsx(Divider, null), __jsx(Link, {\n        href: {\n          pathname: '/model/profile',\n          query: {\n            username: user.username || user._id\n          }\n        },\n        as: \"/\".concat(user.username || user._id)\n      }, __jsx(\"div\", {\n        className: router.asPath === \"/\".concat(user.username || user._id) ? 'menu-item active' : 'menu-item'\n      }, __jsx(HomeIcon, null), ' ', \"My Profile\")), __jsx(Link, {\n        href: \"/model/account\",\n        as: \"/model/account\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/account' ? 'menu-item active' : 'menu-item'\n      }, __jsx(UserOutlined, null), ' ', \"Edit Profile\")), __jsx(Link, {\n        href: {\n          pathname: '/model/block-user'\n        },\n        as: \"/model/block-user\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/block-user' ? 'menu-item active' : 'menu-item'\n      }, __jsx(BlockOutlined, null), ' ', \"Blacklist\")), __jsx(Link, {\n        href: {\n          pathname: '/model/block-countries'\n        },\n        as: \"/model/block-countries\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/block-countries' ? 'menu-item active' : 'menu-item'\n      }, __jsx(StopOutlined, null), ' ', \"Block Countries\")), __jsx(Link, {\n        href: {\n          pathname: '/model/banking'\n        },\n        as: \"/model/banking\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/banking' ? 'menu-item active' : 'menu-item'\n      }, __jsx(BankOutlined, null), ' ', \"Banking (to earn)\")), __jsx(Divider, null), __jsx(Link, {\n        href: \"/model/my-post\",\n        as: \"/model/my-post\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/my-post' ? 'menu-item active' : 'menu-item'\n      }, __jsx(FireOutlined, null), ' ', \"My Feeds\")), __jsx(Link, {\n        href: \"/model/my-video\",\n        as: \"/model/my-video\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/my-video' ? 'menu-item active' : 'menu-item'\n      }, __jsx(VideoCameraOutlined, null), ' ', \"My Videos\")), __jsx(Link, {\n        href: \"/model/my-store\",\n        as: \"/model/my-store\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/my-store' ? 'menu-item active' : 'menu-item'\n      }, __jsx(ShoppingOutlined, null), ' ', \"My Products\")), __jsx(Link, {\n        href: \"/model/my-gallery\",\n        as: \"/model/my-gallery\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/my-gallery' ? 'menu-item active' : 'menu-item'\n      }, __jsx(PictureOutlined, null), ' ', \"My Galleries\")), __jsx(Divider, null), __jsx(Link, {\n        href: {\n          pathname: '/model/my-order'\n        },\n        as: \"/model/my-order\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/my-order' ? 'menu-item active' : 'menu-item'\n      }, __jsx(ShoppingCartOutlined, null), ' ', \"Order History\")), __jsx(Link, {\n        href: \"/model/earning\",\n        as: \"/model/earning\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/earning' ? 'menu-item active' : 'menu-item'\n      }, __jsx(DollarOutlined, null), ' ', \"Earning History\")), __jsx(Link, {\n        href: \"/model/payout-request\",\n        as: \"/model/payout-request\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/model/payout-request' ? 'menu-item active' : 'menu-item'\n      }, __jsx(NotificationOutlined, null), ' ', \"Payout Requests\")), __jsx(Divider, null), __jsx(\"div\", {\n        \"aria-hidden\": true,\n        className: \"menu-item\",\n        onClick: function onClick() {\n          return _this2.beforeLogout();\n        }\n      }, __jsx(LogoutOutlined, null), ' ', \"Sign Out\")), !user.isPerformer && __jsx(\"div\", {\n        className: \"profile-menu-item\"\n      }, __jsx(Link, {\n        href: \"/user/account\",\n        as: \"/user/account\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/user/account' ? 'menu-item active' : 'menu-item'\n      }, __jsx(UserOutlined, null), ' ', \"Edit Profile\")), config.paymentGateway === 'stripe' && __jsx(Link, {\n        href: \"/user/cards\",\n        as: \"/user/cards\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/user/cards' ? 'menu-item active' : 'menu-item'\n      }, __jsx(CreditCardOutlined, null), ' ', \"Add Card\")), __jsx(Link, {\n        href: \"/user/bookmarks\",\n        as: \"/user/bookmarks\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/user/bookmarks' ? 'menu-item active' : 'menu-item'\n      }, __jsx(BookOutlined, null), ' ', \"Bookmarks\")), __jsx(Link, {\n        href: \"/user/my-subscription\",\n        as: \"/user/my-subscription\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/user/my-subscriptions' ? 'menu-item active' : 'menu-item'\n      }, __jsx(HeartOutlined, null), ' ', \"Subscriptions\")), __jsx(Divider, null), __jsx(Link, {\n        href: \"/user/orders\",\n        as: \"/user/orders\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/user/orders' ? 'menu-item active' : 'menu-item'\n      }, __jsx(ShoppingCartOutlined, null), ' ', \"Order History\")), __jsx(Link, {\n        href: \"/user/payment-history\",\n        as: \"/user/payment-history\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/user/payment-history' ? 'menu-item active' : 'menu-item'\n      }, __jsx(HistoryOutlined, null), ' ', \"Payment History\")), __jsx(Link, {\n        href: \"/user/wallet-transaction\",\n        as: \"/user/wallet-transaction\"\n      }, __jsx(\"div\", {\n        className: router.pathname === '/user/wallet-transaction' ? 'menu-item active' : 'menu-item'\n      }, __jsx(DollarOutlined, null), ' ', \"Wallet Transactions\")), __jsx(Divider, null), __jsx(\"div\", {\n        className: \"menu-item\",\n        \"aria-hidden\": true,\n        onClick: function onClick() {\n          return _this2.beforeLogout();\n        }\n      }, __jsx(LogoutOutlined, null), ' ', \"Sign Out\"))), __jsx(SubscribePerformerModal, {\n        onSubscribed: this.handleSubscribe\n      })));\n    }\n  }]);\n\n  return Header;\n}(PureComponent);\n\nHeader.contextType = SocketContext;\n\nvar mapState = function mapState(state) {\n  return _objectSpread({\n    user: _objectSpread({}, state.user.current),\n    ui: _objectSpread({}, state.ui),\n    config: _objectSpread({}, state.settings)\n  }, state.streaming);\n};\n\nvar mapDispatch = {\n  logout: logout,\n  addPrivateRequest: addPrivateRequest,\n  accessPrivateRequest: accessPrivateRequest,\n  updateUIValue: updateUIValue,\n  updateBalance: updateBalance\n};\nexport default withRouter(connect(mapState, mapDispatch)(Header));","map":{"version":3,"sources":["c:/Users/Admin/Desktop/Work/foodiefans/foodiefans-main/user/src/components/common/layout/header.tsx"],"names":["PureComponent","Layout","Badge","Drawer","Divider","Avatar","connect","Link","logout","ShoppingCartOutlined","UserOutlined","HistoryOutlined","CreditCardOutlined","VideoCameraOutlined","FireOutlined","NotificationOutlined","BookOutlined","DollarOutlined","PictureOutlined","StarOutlined","ShoppingOutlined","BankOutlined","LogoutOutlined","HeartOutlined","BlockOutlined","PlusCircleOutlined","StopOutlined","HomeIcon","ModelIcon","PlusIcon","MessageIcon","UserIcon","LiveIcon","TickIcon","WalletSvg","Router","withRouter","RouterEvent","messageService","authService","Event","SocketContext","addPrivateRequest","accessPrivateRequest","updateUIValue","updateBalance","shortenLargeNumber","SubscribePerformerModal","Header","totalNotReadMessage","openProfile","setState","event","total","username","push","pathname","query","events","on","handleChangeRoute","user","props","_id","handleCountNotificationMessage","prevProps","off","token","getToken","socket","context","emit","countTotalNotRead","data","handleUpdateBalance","isPerformer","redirectUrl","window","location","href","handleLogout","router","ui","settings","config","state","handleMessage","bind","handlePaymentStatusCallback","logo","siteName","avatar","name","balance","toFixed","stats","subscribers","totalSubscriptions","theme","agoraEnable","asPath","beforeLogout","paymentGateway","handleSubscribe","contextType","mapState","current","streaming","mapDispatch"],"mappings":"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","sourcesContent":["import { PureComponent } from 'react';\nimport {\n  Layout, Badge, Drawer, Divider, Avatar\n} from 'antd';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport {\n  IUser, StreamSettings, IUIConfig, ISettings\n} from 'src/interfaces';\nimport { logout } from '@redux/auth/actions';\nimport {\n  ShoppingCartOutlined, UserOutlined, HistoryOutlined, CreditCardOutlined,\n  VideoCameraOutlined, FireOutlined, NotificationOutlined, BookOutlined,\n  DollarOutlined, PictureOutlined, StarOutlined, ShoppingOutlined, BankOutlined,\n  LogoutOutlined, HeartOutlined, BlockOutlined, PlusCircleOutlined, StopOutlined\n} from '@ant-design/icons';\nimport {\n  HomeIcon, ModelIcon, PlusIcon, MessageIcon, UserIcon, LiveIcon, TickIcon, WalletSvg\n} from 'src/icons';\nimport Router, { withRouter, Router as RouterEvent } from 'next/router';\nimport {\n  messageService, authService\n} from 'src/services';\nimport { Event, SocketContext } from 'src/socket';\nimport { addPrivateRequest, accessPrivateRequest } from '@redux/streaming/actions';\nimport { updateUIValue } from 'src/redux/ui/actions';\nimport { updateBalance } from '@redux/user/actions';\nimport { shortenLargeNumber } from '@lib/number';\nimport { SubscribePerformerModal } from 'src/components/subscription/subscribe-performer-modal';\nimport './header.less';\n\ninterface IProps {\n  updateBalance: Function;\n  updateUIValue: Function;\n  user: IUser;\n  logout: Function;\n  router: any;\n  ui: IUIConfig;\n  privateRequests: any;\n  addPrivateRequest: Function;\n  accessPrivateRequest: Function;\n  settings: StreamSettings;\n  config: ISettings;\n}\n\nclass Header extends PureComponent<IProps> {\n  state = {\n    totalNotReadMessage: 0,\n    openProfile: false\n  };\n\n  componentDidMount() {\n    RouterEvent.events.on('routeChangeStart', this.handleChangeRoute);\n    const { user } = this.props;\n    if (user._id) {\n      this.handleCountNotificationMessage();\n    }\n  }\n\n  componentDidUpdate(prevProps: any) {\n    const { user } = this.props;\n    if (user._id && prevProps.user._id !== user._id) {\n      this.handleCountNotificationMessage();\n    }\n  }\n\n  componentWillUnmount() {\n    RouterEvent.events.off('routeChangeStart', this.handleChangeRoute);\n    const token = authService.getToken();\n    const socket = this.context;\n    token && socket && socket.emit('auth/logout', { token });\n  }\n\n  handleChangeRoute = () => {\n    this.setState({\n      openProfile: false\n    });\n  }\n\n  handleMessage = async (event) => {\n    event && this.setState({ totalNotReadMessage: event.total });\n  };\n\n  handleSubscribe = (username) => {\n    Router.push(\n      { pathname: '/streaming/details', query: { username } },\n      `/streaming/${username}`\n    );\n  };\n\n  async handleCountNotificationMessage() {\n    const data = await (await messageService.countTotalNotRead()).data;\n    if (data) {\n      this.setState({ totalNotReadMessage: data.total });\n    }\n  }\n\n  async handleUpdateBalance(event) {\n    const { user, updateBalance: handleUpdateBalance } = this.props;\n    if (user.isPerformer) {\n      handleUpdateBalance({ token: event.token });\n    }\n  }\n\n  async handlePaymentStatusCallback({ redirectUrl }) {\n    if (redirectUrl) {\n      window.location.href = redirectUrl;\n    }\n  }\n\n  async beforeLogout() {\n    const { logout: handleLogout } = this.props;\n    const token = authService.getToken();\n    const socket = this.context;\n    token && socket && await socket.emit('auth/logout', {\n      token\n    });\n    handleLogout();\n  }\n\n  render() {\n    const {\n      user, router, ui, settings, config\n    } = this.props;\n    const {\n      totalNotReadMessage, openProfile\n    } = this.state;\n\n    return (\n      <div className=\"main-header\">\n        <Event\n          event=\"nofify_read_messages_in_conversation\"\n          handler={this.handleMessage.bind(this)}\n        />\n        <Event\n          event=\"update_balance\"\n          handler={this.handleUpdateBalance.bind(this)}\n        />\n        <Event\n          event=\"payment_status_callback\"\n          handler={this.handlePaymentStatusCallback.bind(this)}\n        />\n        <div className=\"main-container\">\n          <Layout.Header className=\"header\" id=\"layoutHeader\">\n            <div className=\"nav-bar\">\n              <ul className={user._id ? 'nav-icons' : 'nav-icons custom'}>\n                {user._id && (\n                  <li className={router.pathname === '/home' ? 'active' : ''}>\n                    <Link href=\"/home\">\n                      <a>\n                        <HomeIcon />\n                      </a>\n                    </Link>\n                  </li>\n                )}\n                {user._id && (\n                  <>\n                    {user?.isPerformer && (\n                    <li className={router.pathname === '/model/my-post/create' ? 'active' : ''}>\n                      <Link href=\"/model/my-post/create\">\n                        <a>\n                          <PlusIcon />\n                        </a>\n                      </Link>\n                    </li>\n                    )}\n                  </>\n                )}\n                {user._id && !user.isPerformer && (\n                  <li key=\"model\" className={router.pathname === '/model' ? 'active' : ''}>\n                    <Link href=\"/model\">\n                      <a>\n                        <ModelIcon />\n                      </a>\n                    </Link>\n                  </li>\n                )}\n                {user._id && (\n                  <li key=\"messenger\" className={router.pathname === '/messages' ? 'active' : ''}>\n                    <Link href=\"/messages\">\n                      <a>\n                        <MessageIcon />\n                        <Badge\n                          className=\"cart-total\"\n                          count={totalNotReadMessage}\n                          showZero\n                        />\n                      </a>\n                    </Link>\n                  </li>\n                )}\n                {!user._id && [\n                  <li key=\"logo\" className=\"logo-nav\">\n                    <Link href=\"/home\">\n                      <a>{ui.logo ? <img src={ui.logo} alt=\"logo\" /> : `${ui.siteName}`}</a>\n                    </Link>\n                  </li>,\n                  <li key=\"login\" className={router.pathname === '/' ? 'active' : ''}>\n                    <Link href=\"/\">\n                      <a>Log In</a>\n                    </Link>\n                  </li>,\n                  <li key=\"signup\" className={router.pathname === '/auth/register' ? 'active' : ''}>\n                    <Link href=\"/auth/register\">\n                      <a>Sign Up</a>\n                    </Link>\n                  </li>\n                ]}\n                {user._id && (\n                  <li key=\"avatar\" aria-hidden onClick={() => this.setState({ openProfile: true })}>\n                    {user?.avatar ? <Avatar src={user?.avatar || '/static/no-avatar.png'} /> : <UserIcon />}\n                  </li>\n                )}\n              </ul>\n            </div>\n          </Layout.Header>\n          <Drawer\n            title={(\n              <>\n                <div className=\"profile-user\">\n                  <img className=\"avatar\" src={user?.avatar || '/static/no-avatar.png'} alt=\"avatar\" />\n                  <span className=\"profile-name\">\n                    <span>\n                      {user?.name || 'N/A'}\n                      {' '}\n                      <TickIcon />\n                    </span>\n                    <span className=\"sub-name\">\n                      @\n                      {user?.username || 'n/a'}\n                    </span>\n                  </span>\n                </div>\n                <div className=\"sub-info\">\n                  <a aria-hidden className=\"user-balance\" onClick={() => (!user?.isPerformer ? Router.push('/wallet') : Router.push('/model/earning'))}>\n                    <WalletSvg />\n                    {' '}\n                    $\n                    {(user?.balance || 0).toFixed(2)}\n                    {!user?.isPerformer && <PlusCircleOutlined />}\n                  </a>\n                  {user.isPerformer ? (\n                    <Link href=\"/model/my-subscriber\">\n                      <a>\n                        <StarOutlined />\n                        Subscribers\n                        {' '}\n                        {shortenLargeNumber(user?.stats?.subscribers || 0)}\n                      </a>\n                    </Link>\n                  ) : (\n                    <Link href=\"/user/my-subscription\">\n                      <a>\n                        <HeartOutlined />\n                        Subscription\n                        {' '}\n                        {shortenLargeNumber(user?.stats?.totalSubscriptions || 0)}\n                      </a>\n                    </Link>\n                  )}\n                </div>\n              </>\n            )}\n            closable\n            onClose={() => this.setState({ openProfile: false })}\n            visible={openProfile}\n            key=\"profile-drawer\"\n            className={ui.theme === 'light' ? 'profile-drawer' : 'profile-drawer dark'}\n            width={280}\n          >\n            {user.isPerformer && (\n              <div className=\"profile-menu-item\">\n                {settings?.agoraEnable && (\n                <Link href={{ pathname: '/model/live' }} as=\"/model/live\">\n                  <div className={router.asPath === '/model/live' ? 'menu-item active' : 'menu-item'}>\n                    <LiveIcon />\n                    {' '}\n                    Go Live\n                  </div>\n                </Link>\n                )}\n                <Divider />\n                <Link href={{ pathname: '/model/profile', query: { username: user.username || user._id } }} as={`/${user.username || user._id}`}>\n                  <div className={router.asPath === `/${user.username || user._id}` ? 'menu-item active' : 'menu-item'}>\n                    <HomeIcon />\n                    {' '}\n                    My Profile\n                  </div>\n                </Link>\n                <Link href=\"/model/account\" as=\"/model/account\">\n                  <div className={router.pathname === '/model/account' ? 'menu-item active' : 'menu-item'}>\n                    <UserOutlined />\n                    {' '}\n                    Edit Profile\n                  </div>\n                </Link>\n                <Link href={{ pathname: '/model/block-user' }} as=\"/model/block-user\">\n                  <div className={router.pathname === '/model/block-user' ? 'menu-item active' : 'menu-item'}>\n                    <BlockOutlined />\n                    {' '}\n                    Blacklist\n                  </div>\n                </Link>\n                <Link href={{ pathname: '/model/block-countries' }} as=\"/model/block-countries\">\n                  <div className={router.pathname === '/model/block-countries' ? 'menu-item active' : 'menu-item'}>\n                    <StopOutlined />\n                    {' '}\n                    Block Countries\n                  </div>\n                </Link>\n                <Link href={{ pathname: '/model/banking' }} as=\"/model/banking\">\n                  <div className={router.pathname === '/model/banking' ? 'menu-item active' : 'menu-item'}>\n                    <BankOutlined />\n                    {' '}\n                    Banking (to earn)\n                  </div>\n                </Link>\n                <Divider />\n                <Link href=\"/model/my-post\" as=\"/model/my-post\">\n                  <div className={router.pathname === '/model/my-post' ? 'menu-item active' : 'menu-item'}>\n                    <FireOutlined />\n                    {' '}\n                    My Feeds\n                  </div>\n                </Link>\n                <Link href=\"/model/my-video\" as=\"/model/my-video\">\n                  <div className={router.pathname === '/model/my-video' ? 'menu-item active' : 'menu-item'}>\n                    <VideoCameraOutlined />\n                    {' '}\n                    My Videos\n                  </div>\n                </Link>\n                <Link href=\"/model/my-store\" as=\"/model/my-store\">\n                  <div className={router.pathname === '/model/my-store' ? 'menu-item active' : 'menu-item'}>\n                    <ShoppingOutlined />\n                    {' '}\n                    My Products\n                  </div>\n                </Link>\n                <Link href=\"/model/my-gallery\" as=\"/model/my-gallery\">\n                  <div className={router.pathname === '/model/my-gallery' ? 'menu-item active' : 'menu-item'}>\n                    <PictureOutlined />\n                    {' '}\n                    My Galleries\n                  </div>\n                </Link>\n                <Divider />\n                <Link href={{ pathname: '/model/my-order' }} as=\"/model/my-order\">\n                  <div className={router.pathname === '/model/my-order' ? 'menu-item active' : 'menu-item'}>\n                    <ShoppingCartOutlined />\n                    {' '}\n                    Order History\n                  </div>\n                </Link>\n                <Link href=\"/model/earning\" as=\"/model/earning\">\n                  <div className={router.pathname === '/model/earning' ? 'menu-item active' : 'menu-item'}>\n                    <DollarOutlined />\n                    {' '}\n                    Earning History\n                  </div>\n                </Link>\n                <Link href=\"/model/payout-request\" as=\"/model/payout-request\">\n                  <div className={router.pathname === '/model/payout-request' ? 'menu-item active' : 'menu-item'}>\n                    <NotificationOutlined />\n                    {' '}\n                    Payout Requests\n                  </div>\n                </Link>\n                <Divider />\n                <div aria-hidden className=\"menu-item\" onClick={() => this.beforeLogout()}>\n                  <LogoutOutlined />\n                  {' '}\n                  Sign Out\n                </div>\n              </div>\n            )}\n            {!user.isPerformer && (\n              <div className=\"profile-menu-item\">\n                <Link href=\"/user/account\" as=\"/user/account\">\n                  <div className={router.pathname === '/user/account' ? 'menu-item active' : 'menu-item'}>\n                    <UserOutlined />\n                    {' '}\n                    Edit Profile\n                  </div>\n                </Link>\n                {config.paymentGateway === 'stripe' && (\n                <Link href=\"/user/cards\" as=\"/user/cards\">\n                  <div className={router.pathname === '/user/cards' ? 'menu-item active' : 'menu-item'}>\n                    <CreditCardOutlined />\n                    {' '}\n                    Add Card\n                  </div>\n                </Link>\n                )}\n                <Link href=\"/user/bookmarks\" as=\"/user/bookmarks\">\n                  <div className={router.pathname === '/user/bookmarks' ? 'menu-item active' : 'menu-item'}>\n                    <BookOutlined />\n                    {' '}\n                    Bookmarks\n                  </div>\n                </Link>\n                <Link href=\"/user/my-subscription\" as=\"/user/my-subscription\">\n                  <div className={router.pathname === '/user/my-subscriptions' ? 'menu-item active' : 'menu-item'}>\n                    <HeartOutlined />\n                    {' '}\n                    Subscriptions\n                  </div>\n                </Link>\n                <Divider />\n                <Link href=\"/user/orders\" as=\"/user/orders\">\n                  <div className={router.pathname === '/user/orders' ? 'menu-item active' : 'menu-item'}>\n                    <ShoppingCartOutlined />\n                    {' '}\n                    Order History\n                  </div>\n                </Link>\n                <Link href=\"/user/payment-history\" as=\"/user/payment-history\">\n                  <div className={router.pathname === '/user/payment-history' ? 'menu-item active' : 'menu-item'}>\n                    <HistoryOutlined />\n                    {' '}\n                    Payment History\n                  </div>\n                </Link>\n                <Link href=\"/user/wallet-transaction\" as=\"/user/wallet-transaction\">\n                  <div className={router.pathname === '/user/wallet-transaction' ? 'menu-item active' : 'menu-item'}>\n                    <DollarOutlined />\n                    {' '}\n                    Wallet Transactions\n                  </div>\n                </Link>\n                <Divider />\n                <div className=\"menu-item\" aria-hidden onClick={() => this.beforeLogout()}>\n                  <LogoutOutlined />\n                  {' '}\n                  Sign Out\n                </div>\n              </div>\n            )}\n            {/* <div className=\"switchTheme\">\n              <span>\n                <BulbOutlined />\n                <span>Switch Theme</span>\n              </span>\n              <Switch\n                onChange={this.onThemeChange.bind(this, ui.theme === 'dark' ? 'light' : 'dark')}\n                checked={ui.theme === 'dark'}\n                checkedChildren=\"Dark\"\n                unCheckedChildren=\"Light\"\n              />\n            </div> */}\n          </Drawer>\n          <SubscribePerformerModal onSubscribed={this.handleSubscribe} />\n        </div>\n      </div>\n    );\n  }\n}\n\nHeader.contextType = SocketContext;\n\nconst mapState = (state: any) => ({\n  user: { ...state.user.current },\n  ui: { ...state.ui },\n  config: { ...state.settings },\n  ...state.streaming\n});\nconst mapDispatch = {\n  logout, addPrivateRequest, accessPrivateRequest, updateUIValue, updateBalance\n};\nexport default withRouter(connect(mapState, mapDispatch)(Header)) as any;\n"]},"metadata":{},"sourceType":"module"}